<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aluggnb.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Step out of your comfort zone">
<meta property="og:type" content="website">
<meta property="og:title" content="Alugg&#39;s Blog">
<meta property="og:url" content="https://aluggnb.com/index.html">
<meta property="og:site_name" content="Alugg&#39;s Blog">
<meta property="og:description" content="Step out of your comfort zone">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Alugg">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aluggnb.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Alugg's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Alugg's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/15/javaday17_StreamAPI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/15/javaday17_StreamAPI/" class="post-title-link" itemprop="url">java-Day16——lambda表达式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-15 23:20:30" itemprop="dateCreated datePublished" datetime="2023-10-15T23:20:30+08:00">2023-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="StreamAPI"><a href="#StreamAPI" class="headerlink" title="StreamAPI"></a>StreamAPI</h1><ul>
<li>Stream API关注的是多个数据的计算（排序、查找、过滤、映射、遍历等，面向CPU。集合关注的数据的存储，向下内存的。</li>
<li>Stream  API之于集合，类似于SQL之于数据表的查询。</li>
</ul>
<p>使用说明</p>
<ul>
<li>Stream不会存储元素</li>
<li>Stream不会改变源对象。相反，他们会返回一个持有结果的新Stream</li>
<li>Stream是延迟执行的。这意味着他们会等到需要结果的时候才执行。即一旦执行终止操作，就执行中间操作链，并产生结果</li>
<li>Stream一旦执行了终止操作，就不能再调用其它中间操作或终止操作</li>
</ul>
<h1 id="Stream执行流程"><a href="#Stream执行流程" class="headerlink" title="Stream执行流程"></a>Stream执行流程</h1><ol>
<li>Stream的实例化</li>
<li>一系列的中间操作</li>
<li>执行终止操作</li>
</ol>
<h2 id="实例化："><a href="#实例化：" class="headerlink" title="实例化："></a><strong>实例化：</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建Stream方式一：通过集合</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Employee&gt; list = EmployeeData.getEmployees();</span><br><span class="line">    <span class="comment">// default Stream&lt;E&gt; stream():返回一个顺序流</span></span><br><span class="line">    Stream&lt;Employee&gt; stream = list.stream();</span><br><span class="line">    <span class="comment">// default Stream&lt;E&gt; parallelStream():返回一个并行流</span></span><br><span class="line">    Stream&lt;Employee&gt; stream1= list.parallelStream();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Stream方式二：通过数组</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//通过调用Arrays的static&lt;T&gt; Stream&lt;T&gt; stream(T[] array):返回一个流</span></span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    Stream&lt;Integer&gt; stream = Arrays.stream(arr);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="type">IntStream</span> <span class="variable">stream1</span> <span class="operator">=</span> Arrays.stream(arr1);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Stream方式三：通过Stream的of()</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    Stream&lt;String&gt; stream = Stream.of(<span class="string">&quot;Aa&quot;</span>, <span class="string">&quot;bb&quot;</span>, <span class="string">&quot;cc&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="中间操作"><a href="#中间操作" class="headerlink" title="中间操作"></a><strong>中间操作</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.筛选与切片</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//filter(Predicate p)--接受Lambda,从流中排除某些元素</span></span><br><span class="line"><span class="comment">//ex.查询员工表中薪资大于7000的员工信息</span></span><br><span class="line">    List&lt;Employee&gt; list = EmployeeData.getEmployees();</span><br><span class="line">    Stream&lt;Employee&gt; stream = list.stream();</span><br><span class="line">    stream.filter(emp -&gt; emp.getSalary()&gt;<span class="number">7000</span>).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//limit(n) --截断流，使其元素不超过给定数量</span></span><br><span class="line">    list.stream().limit(<span class="number">4</span>).forEach(System.out::println);</span><br><span class="line"><span class="comment">//skip(n) -- 跳过元素。返回一个扔掉前n个元素的流</span></span><br><span class="line">    list.stream().skip(<span class="number">5</span>).forEach(System.out::println);</span><br><span class="line"><span class="comment">//distinct() --筛选，通过流所生成元素的hashCode()和equals()去除重复元素</span></span><br><span class="line">    list.stream().distinct().forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.映射</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//map(Function f)接受一个函数作为参数，将元素转化成其他形式或提取信息，该函数会应用到每个元素</span></span><br><span class="line">    List&lt;String&gt; list = Arrays.aslist(<span class="string">&quot;aa&quot;</span>,<span class="string">&quot;bb&quot;</span>,<span class="string">&quot;cc&quot;</span>,<span class="string">&quot;dd&quot;</span>);</span><br><span class="line">    list.stream().map(str -&gt; str.toUpperCase()).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Ex:获取员工姓名大于3的员工</span></span><br><span class="line">    List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">    employees.stream().filter(emp-&gt;emp.getName().length()&gt;<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Ex.获取员工姓名长度大于3的员工的姓名</span></span><br><span class="line">    List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">    employees.stream().filter(emp-&gt;emp.getName().length()&gt;<span class="number">3</span>).map(emp-&gt;emp.getName()).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3.排序</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//sorted()- 自然排序</span></span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">12</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">45</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    String[] arr1 = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;GG&quot;</span>,<span class="string">&quot;DD&quot;</span>,<span class="string">&quot;FF&quot;</span>,<span class="string">&quot;SS&quot;</span>,<span class="string">&quot;JJ&quot;</span>&#125;;</span><br><span class="line">    Arrays.stream(arr).sorted().forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//sorted(Comparator com) - 定制排序</span></span><br><span class="line">    List&lt;Employee&gt; list = EmployeeData.getEmployees();</span><br><span class="line">    list.stream().sorted((e1,e2)-&gt; e1.getAge() - e2.getAge()).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="终止操作"><a href="#终止操作" class="headerlink" title="终止操作"></a><strong>终止操作</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamAPITest3</span> &#123;</span><br><span class="line">    <span class="comment">//1-匹配与查找</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = EmployeeData.getEmployees();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//allMatch(Predicate p) -检测是否匹配所有元素</span></span><br><span class="line">        System.out.println(list.stream().allMatch(emp-&gt;emp.getAge()&gt;<span class="number">18</span>));</span><br><span class="line">        <span class="comment">//anyMatch(Predicate p)-检查是否至少匹配一个元素</span></span><br><span class="line">        System.out.println(list.stream().anyMatch(emp-&gt;emp.getAge()&gt;<span class="number">18</span>));</span><br><span class="line">        <span class="comment">//findFirst-返回第一个元素</span></span><br><span class="line">        System.out.println(list.stream().findFirst(emp-&gt;emp.getAge()&gt;<span class="number">18</span>));</span><br><span class="line">        <span class="comment">//Count-返回流中元素的总个数</span></span><br><span class="line">        System.out.println(list.stream().filter(emp-&gt;emp.getSalary()&gt;<span class="number">7000</span>).count());</span><br><span class="line">        <span class="comment">//max(Comparator c)-返回流中最大值</span></span><br><span class="line">        list.stream().max((e1,e2)-&gt; Double.compare(e1.getSalary(), e2.getSalary()));</span><br><span class="line">        <span class="comment">//min(Comparator c)-返回流中最大值</span></span><br><span class="line">        <span class="comment">//forEach(Consumer c)-内部迭代</span></span><br><span class="line">        list.stream().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2-归约</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//reduce(T identity, BinaryOperator)-可以将流中元素反复结合起来，得到一个值</span></span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>);</span><br><span class="line">        list.stream().reduce(<span class="number">0</span>,(x1,x2)-&gt;x1+x2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//reduce(BinaryOperator)</span></span><br><span class="line">        <span class="comment">//ex.计算公司所有员工工资总和</span></span><br><span class="line">        list&lt;Employee&gt; employeeList = EmployeeData.getEmployees();</span><br><span class="line">        System.out.println(employeeList.stream().map(employee-&gt;employee.geSalary()).reduce((salary1,salary2)-&gt;Double.sum(salary1,salary2)));</span><br><span class="line">        System.out.println(employeeList.stream().map(employee-&gt;employee.geSalary()).reduce(Double::sum);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.收集</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//collect(Collector c)-将流转换位其他形式。接受一个Collector接口的实现，用于给Stream中元素做汇总方法</span></span><br><span class="line">        <span class="comment">//ex1:查找工资大于6000的员工，返回一个List</span></span><br><span class="line">        List&lt;Employee&gt; list = EmployeeData.getEmployees();</span><br><span class="line">        List&lt;Employee&gt; list1 = list.stream().filter(emp-&gt; emp.getSalary()&gt;<span class="number">6000</span>).collect(Collectors.toList());</span><br><span class="line">        list1.forEach(System.out::println);</span><br><span class="line">        <span class="comment">//ex2:员工年龄排序</span></span><br><span class="line">        List&lt;Employee&gt; list2 = list.stream().sorted((e1,e2)-&gt;e1.getAge()-e2.getAge()).collect(Collectors.toList());</span><br><span class="line">        list2.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/14/javaday16_lambda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/14/javaday16_lambda/" class="post-title-link" itemprop="url">java-Day16——lambda表达式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-14 22:24:36" itemprop="dateCreated datePublished" datetime="2023-10-14T22:24:36+08:00">2023-10-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>6.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h1><h1 id="使用举例"><a href="#使用举例" class="headerlink" title="使用举例"></a>使用举例</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; com2 =(o1, o2)-&gt; Integer.compare(o1, o2);</span><br></pre></td></tr></table></figure>



<h1 id="格式举例"><a href="#格式举例" class="headerlink" title="格式举例"></a>格式举例</h1><p>lambda形参列表 -&gt;Lambda方法体</p>
<p>-&gt;:Lambda操作符或箭头操作符</p>
<p>-&gt;的左边：lambda形参列表，对应着要重写接口中的抽象方法的形参列表</p>
<p>-&gt;的右边：lambda体，对应着接口的实现类要重写的方法的方法体</p>
<h2 id="无参，无返回值"><a href="#无参，无返回值" class="headerlink" title="无参，无返回值"></a>无参，无返回值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    r1.run();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Lambda表达式写法</span></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt;&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    r2.run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="需要一个参数，但无返回值"><a href="#需要一个参数，但无返回值" class="headerlink" title="需要一个参数，但无返回值"></a>需要一个参数，但无返回值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    Consumer&lt;String&gt; con = <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(String s)</span> &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    con.accept(<span class="string">&quot;嘻嘻哈哈&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Lambda表达式写法</span></span><br><span class="line">    Consumer&lt;String&gt; con1 = (String s) -&gt;&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;;</span><br><span class="line">    con1.accept(<span class="string">&quot;嘻嘻哈哈&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据类型可以省略，因为可以推断除了，类型推断"><a href="#数据类型可以省略，因为可以推断除了，类型推断" class="headerlink" title="数据类型可以省略，因为可以推断除了，类型推断"></a>数据类型可以省略，因为可以推断除了，类型推断</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">    Consumer&lt;String&gt; con1 = (String s) -&gt;&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;;</span><br><span class="line">    con1.accept(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">	<span class="comment">//Lambda表达式写法</span></span><br><span class="line">    Consumer&lt;String&gt; con2 = (s) -&gt; &#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;;</span><br><span class="line">    con2.accept(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="若只需要一个参数，参数小括号可以省略"><a href="#若只需要一个参数，参数小括号可以省略" class="headerlink" title="若只需要一个参数，参数小括号可以省略"></a>若只需要一个参数，参数小括号可以省略</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">    Consumer&lt;String&gt; con1 = (String s) -&gt;&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;;</span><br><span class="line">    con1.accept(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">	<span class="comment">//Lambda表达式写法</span></span><br><span class="line">    Consumer&lt;String&gt; con2 = s -&gt; &#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;;</span><br><span class="line">    con2.accept(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="两个或以上的参数，多条执行语句，并且有返回值"><a href="#两个或以上的参数，多条执行语句，并且有返回值" class="headerlink" title="两个或以上的参数，多条执行语句，并且有返回值"></a>两个或以上的参数，多条执行语句，并且有返回值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">    Comparator&lt;Integer&gt; com1 = <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">            System.out.println(o1);</span><br><span class="line">            System.out.println(o2);</span><br><span class="line">            <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//Lambda表达式写法</span></span><br><span class="line">    Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; &#123;</span><br><span class="line">        System.out.println(o1);</span><br><span class="line">        System.out.println(o2);</span><br><span class="line">        <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="当Lambda体只有一条语句时，return与大括号若有，都可以忽略"><a href="#当Lambda体只有一条语句时，return与大括号若有，都可以忽略" class="headerlink" title="当Lambda体只有一条语句时，return与大括号若有，都可以忽略"></a>当Lambda体只有一条语句时，return与大括号若有，都可以忽略</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">()</span>&#123;</span><br><span class="line">    Comparator&lt;Integer&gt; com1 = <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">            System.out.println(o1);</span><br><span class="line">            System.out.println(o2);</span><br><span class="line">            <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//Lambda表达式写法</span></span><br><span class="line">    Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; o1.compareTo(o2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Lambda表达式本质"><a href="#Lambda表达式本质" class="headerlink" title="Lambda表达式本质"></a><strong>Lambda表达式本质</strong></h2><ul>
<li>一方面，lambda表达式作为接口的实现类的对象。</li>
<li>lambda表达式是一个匿名函数</li>
</ul>
<h1 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h1><p>定义：</p>
<ul>
<li><p>如果接口中只声明有一个抽象方法，则此接口就称为函数式接口。</p>
</li>
<li><p>只有给函数式接口提供实现类的对象时，我们才可以使用lambda表达式</p>
</li>
</ul>
<h2 id="常见的函数式接口"><a href="#常见的函数式接口" class="headerlink" title="常见的函数式接口"></a>常见的函数式接口</h2><p>消费型接口：Consumer<T>     void accept(T t)</p>
<p>供给型接口：Supplier<T>       T get()</p>
<p>函数型接口: Function&lt;T,R&gt;    R apply(T t)</p>
<p>判断型接口：Predicate<T>      boolean test(T t)</p>
<p>Lambda表达式的语法规则总结</p>
<p>-&gt;的左边：lambda形参列表，参数的类型都可以省略。形参如果只有一个，则一对()也可以省略</p>
<p>-&gt;的右边：lambda体，对应着重写的方法的方法体。如果方法体只有一行执行语句，则一对{}省略</p>
<h1 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h1><h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><p>Integer :: compare</p>
<h2 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h2><ul>
<li>方法引用，可以看作是基于Lambda表达式的进一步刻画</li>
<li>当需要提供一个函数式接口的实例时，我们可以使用lambda表达式提供此实例<ul>
<li>当满足一定条件的情况下，我们还可以使用方法引用或构造器替换lambda表达式</li>
</ul>
</li>
</ul>
<h2 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h2><p>方法引用作为函数式接口的实例</p>
<h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>类（或对象）：：方法名</p>
<h2 id="具体使用情况说明"><a href="#具体使用情况说明" class="headerlink" title="具体使用情况说明"></a>具体使用情况说明</h2><p>Case1: 对象：：实例方法</p>
<p>要求：函数式接口中的抽象方法a与其内部实现时调用的对象的某个方法b的形参列表和返回值都一致。此时可以考虑使用方法b实现对方法a的替换和覆盖。此替换或覆盖即为方法应用。</p>
<p>注意：此方法b是非静态的方法，需要对象调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况1: 对象::实例方法</span></span><br><span class="line"><span class="comment">//Consumer中的void accept(T t)</span></span><br><span class="line"><span class="comment">//PrinStream中的void println(T t)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Consumer&lt;String&gt; con1 = <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(String s)</span> &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Consumer&lt;String&gt; con2 = s -&gt; System.out.println(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    Consumer&lt;String&gt; con3 = System.out::println;</span><br><span class="line">    con3.accept(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Supplier中的T get()</span></span><br><span class="line"><span class="comment">//Employee中的String getName()</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    <span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emplyoee</span>(<span class="string">&quot;alugg&quot;</span>,<span class="number">15</span>);</span><br><span class="line">    Supplier&lt;String&gt; sup1 = <span class="keyword">new</span> <span class="title class_">Supplier</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> emp.getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    System.out.println(sup1.get());</span><br><span class="line">    <span class="comment">//2.lambda表达式</span></span><br><span class="line">    Supplier&lt;String&gt; sup2 = ()-&gt;emp.getName();</span><br><span class="line">    System.out.println(sup2.get());</span><br><span class="line">    <span class="comment">//3.方法引用</span></span><br><span class="line">    Supplier&lt;String&gt; sup3 = emp::getName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Case2: 类：：静态方法</p>
<p>要求：函数式接口中的抽象方法a与其内部实现时调用的类的某个静态方法b的形参列表和返回值都相同（一致）。此时可以考虑使用方法b实现对方法a的替换和覆盖。此替换或覆盖即为方法应用。</p>
<p>注意：此方法b是静态的方法，需要对象调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Comparator中的int compare(T t1, T t2)</span></span><br><span class="line"><span class="comment">//Integer中的int compare(T t1, T t2)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Comparator&lt;Integer&gt; com1 = <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.compare(o1, o2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Comparator&lt;Integer&gt; com2 = (o1,o2) -&gt; Integer.compare(o1, o2);</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    Comparator&lt;Integer&gt; com3 = Integer::compare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function中的R apply(T t)</span></span><br><span class="line"><span class="comment">//Math中的Long round(Double d)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Function&lt;Double, Long&gt; fun1 = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Double, Long&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Long <span class="title function_">apply</span><span class="params">(Double aDouble)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Math.round(aDouble);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Function&lt;Double,Long&gt; fun2 = aDouble -&gt; Math.round(aDouble);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    Function&lt;Double,Long&gt; fun3 = Math::round;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Case3: 类：：实例方法</p>
<p>要求：函数式接口中的抽象方法a与其内部实现时调用的对象的某个方法b的返回值类型相同。</p>
<p>同时，抽象方法a中有n个参数，方法b中有n-1个参数。且抽象方法a的第1个参数作为方法b的调用者，切抽象方法a的后n-1个参数与方法b的n-1个参数类型相同</p>
<p>注意：此方法b是非静态方法，需要对象调用。但是形式上，写出对象a所属的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    BiPredicate&lt;String, String&gt; biPre1 = <span class="keyword">new</span> <span class="title class_">BiPredicate</span>&lt;String, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(String s, String s2)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> s.equals(s2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    BiPredicate&lt;String, String&gt; biPre2 = (s1,s2) -&gt; s1.equals(s2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    BiPredicate&lt;String, String&gt; biPre3 = String::equals;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emplyoee</span>(<span class="string">&quot;alugg&quot;</span>,<span class="number">15</span>);</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Function&lt;Employee, String&gt; fun1 = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Employee, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">apply</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> employee.getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Function&lt;Employee, String&gt; fun2 = emp -&gt; emp.getName();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    Function&lt;Employee, String&gt; fun3 = Employee::getName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="构造器引用"><a href="#构造器引用" class="headerlink" title="构造器引用"></a>构造器引用</h1><h2 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h2><p>类名：：new</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul>
<li>调用了类名对应的类中的某一个确定的构造器</li>
<li>具体调用的是类中的哪一个构造器取决于函数式接口函数式接口的抽象方法的形参列表</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    Supplier&lt;Employee&gt; sup1 = <span class="keyword">new</span> <span class="title class_">Supplier</span>&lt;Employee&gt;()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.构造器引用</span></span><br><span class="line">Supplier&lt;Employee&gt; sup2 = Employee::<span class="keyword">new</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//Function 中的R apply(T t)</span></span><br><span class="line">    Function&lt;Integer, Employee&gt; func1 = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Integer, Employee&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Employee <span class="title function_">apply</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Function&lt;Integer, Employee&gt; func2 = Employee::<span class="keyword">new</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    BiFunction&lt;Integer, String, Employee&gt; func1 = <span class="keyword">new</span> <span class="title class_">BiFunction</span>&lt;Integer, String, Employee&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Employee <span class="title function_">apply</span><span class="params">(Integer id, String name)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(id, name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    BiFunction&lt;Integer, String, Employee&gt; func2 = Employee.new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="数组引用"><a href="#数组引用" class="headerlink" title="数组引用"></a>数组引用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    Function&lt;Integer, Employee[]&gt; func1 = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Integer, Employee[]&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Employee[] apply(Integer length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employee</span>[length];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    Function&lt;Integer, Employee[]&gt; func2 = Employee[]::<span class="keyword">new</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/13/javaday15_reflexion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/13/javaday15_reflexion/" class="post-title-link" itemprop="url">java-Day15——反射</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-13 22:10:15" itemprop="dateCreated datePublished" datetime="2023-10-13T22:10:15+08:00">2023-10-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><p>反射是动态语言的关键，反射机制运行程序在运行期间借助于Reflection API取得任何类的内部信息，并能之间操作任意对象的内部属性与方法。</p>
<p>反射的意义：</p>
<p><strong>1.面向对象中创建对象，调用指定结果（属性、方法）等功能，可以不适用反射，也可以使用反射。有什么区别？</strong></p>
<p>使用反射，我们可以调用运行时类中任意的构造器、属性、方法。包括了私有属性、方法构造器</p>
<p><strong>2.以前创建对象并调用方法的方式，与现在通过反射创建对象并调用方法的方式对比的画，那种使用的多？场景？</strong></p>
<ul>
<li><p>作为程序员主要完成的是业务代码，对于相关的对象、方法的调用是确定的。因此使用非反射的情况多。</p>
</li>
<li><p>因为反射提醒了动态性（可以在运行时动态的获取对象所属的类，动态的调用相关的方法），所以我们在设计框架时会大量使用反射。框架 &#x3D; 注解+反射+设计模式</p>
</li>
</ul>
<p><strong>3.单例模式的饿汉式与懒汉式，私有化类的构造器。此时通过反射可以通过单例模式中类的多个对象吗？</strong></p>
<p>是的</p>
<p><strong>4.通过反射，可以调用类中私有结构，是否与面向对象的封装性有冲突？</strong></p>
<p>封装性：提醒的是是否建议我们调用内部api的问题。比如，private声明的结果，意味着不建议调用。</p>
<p>反射：提醒的是我们能否调用的问题。因为类的完整结构都加载到了内存中，所有我们就有能力进行调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, NoSuchFieldException, InvocationTargetException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//1.创建Person类的实例</span></span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> clazz.newInstance();</span><br><span class="line">        System.out.println(p1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.调用属性</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">ageField</span> <span class="operator">=</span> clazz.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        ageField.set(p1, <span class="number">10</span>);</span><br><span class="line">        System.out.println(ageField.get(p1));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.调用方法</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">showMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        showMethod.invoke(p1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 出了Person类，就无法直接调用private修饰的结构</span></span><br><span class="line"><span class="comment">     * 但可以通过反射的方式来调用</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="comment">//1.调用私有的构造器，创建Person的实例</span></span><br><span class="line">        <span class="comment">//private Person(String name, int age)</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz1</span> <span class="operator">=</span> Person.class;</span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">cons</span> <span class="operator">=</span> clazz1.getDeclaredConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">        cons.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> (Person) cons.newInstance(<span class="string">&quot;Tom&quot;</span>,<span class="number">12</span>);</span><br><span class="line">        System.out.println(p1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.调用私有属性</span></span><br><span class="line">        <span class="comment">//private String name</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">nameField</span> <span class="operator">=</span> clazz1.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        nameField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        nameField.set(p1,<span class="string">&quot;jerry&quot;</span>);</span><br><span class="line">        System.out.println(nameField.get(p1));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.调用私有的方法</span></span><br><span class="line">        <span class="comment">//private String showNation(String nation)</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">showNationMethod</span> <span class="operator">=</span> clazz1.getDeclaredMethod(<span class="string">&quot;showNation&quot;</span>, String.class);</span><br><span class="line">        showNationMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> (String) showNationMethod.invoke(p1, <span class="string">&quot;CHN&quot;</span>);</span><br><span class="line">        System.out.println(info);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;showshow&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">showNation</span><span class="params">(String nation)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h1><p>针对于编写好的.java源文件进行编译（使用javac.exe),会生产一个或多个.class字节码文件。接着我们使用java.exe命令对知道的.class文件进行解释运行。这个解释运行的过程中，我们需要将.class字节码文件(使用类的加载器）加载到内存中。加载到内存中（方法区）的.class文件对应的结果即为Class的一个实例。</p>
<p>比如：加载到内存中的Person类或String类或User类。都作为Class的一个个实例</p>
<p>Class clazz1 &#x3D; Person.class;&#x2F;&#x2F;运行时类</p>
<p>Class clazz4 &#x3D; Comparable.class;</p>
<p>说明：运行时类在内存会缓存起来，在整个执行期间，只会加载一次。</p>
<h2 id="获取Class的实例的方式"><a href="#获取Class的实例的方式" class="headerlink" title="获取Class的实例的方式"></a>获取Class的实例的方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1.class</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz1</span> <span class="operator">=</span> Person.class;</span><br><span class="line">        System.out.println(clazz1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.调用运行时类的对象的getclass()</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz2</span> <span class="operator">=</span> p1.getClass();</span><br><span class="line">        System.out.println(clazz1 == clazz2);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.调用Class的静态方法forName(String className)</span></span><br><span class="line">        String className= <span class="string">&quot;ex2.Person&quot;</span>;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz3</span> <span class="operator">=</span> Class.forName(className);</span><br><span class="line">        System.out.println(clazz1==clazz3);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.使用类加载器的方式</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz4</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader().loadClass(<span class="string">&quot;ex2.Person&quot;</span>);</span><br><span class="line">        System.out.println(clazz1==clazz4);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Class的实例可以指向哪些结构"><a href="#Class的实例可以指向哪些结构" class="headerlink" title="Class的实例可以指向哪些结构"></a>Class的实例可以指向哪些结构</h2><p>所有java类型</p>
<h2 id="类的加载过程"><a href="#类的加载过程" class="headerlink" title="类的加载过程"></a>类的加载过程</h2><p><strong>过程1：类的装载Load</strong></p>
<p>将类的class文件读入内存，并为之创建一个java.lang.Class对象。此过程由类加载器完成</p>
<p><strong>过程2：连接Link</strong></p>
<ul>
<li>验证（Verify)：确保加载的类信息符合JVM规范。</li>
<li>准备(Prepare):正式为类变量份分配内存并设置类变量默认初始值的阶段，这些内存都会在方法区分配</li>
<li>解析(Resolve)：虚拟机常量池内的符号引用（常量名）替换为直接引用（地址）的过程</li>
</ul>
<p><strong>过程3：初始化initialization</strong></p>
<p>执行类构造器<clinit>()方法的过程。</p>
<p>类构造器<clinit>()方法是由编译器自动收集类中所有类变量的赋值动作和静态代码块中的语句合并产生的。</p>
<h2 id="类的加载器"><a href="#类的加载器" class="headerlink" title="类的加载器"></a>类的加载器</h2><p>作用：负责类的加载，并对应于一个Class的实例</p>
<p>分类（分为两种）：</p>
<p>1.BootStrapClassLoader:引导类加载器</p>
<ul>
<li>使用C&#x2F;c++语言编写，不能通过Java代码获取其实例</li>
<li>负责加载Java的核心库（JAVA_HOME&#x2F;jre&#x2F;lib&#x2F;rt.jar或sun.boot.class.path路径下的内容）</li>
</ul>
<p>2.继承于ClassLoader的类加载器</p>
<ul>
<li>ExtensionClassLoader:扩展类加载器</li>
<li>SystemClassLoader&#x2F;ApplicationClassLoader:系统类加载器、应用程序类加载器</li>
<li>用户自定义类加载器</li>
</ul>
<p>以上的类加载器是否存在继承关系</p>
<p>不存在。</p>
<h2 id="通过classLoader加载指定配置文件"><a href="#通过classLoader加载指定配置文件" class="headerlink" title="通过classLoader加载指定配置文件"></a>通过classLoader加载指定配置文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">//通过类的加载器读取的文件默认路径为：当前module的src下</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader().getResourceAsStream(<span class="string">&quot;../info.properties&quot;</span>);</span><br><span class="line">    pros.load(is);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(name+<span class="string">&quot;:&quot;</span>+pwd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h1><h2 id="1-创建运行时的对象"><a href="#1-创建运行时的对象" class="headerlink" title="1.创建运行时的对象"></a>1.创建运行时的对象</h2><p>1.1 实现方法：</p>
<p>通过Class的实例调用newInstance()方法即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewInstanceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建Person类的实例</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">per</span> <span class="operator">=</span> (Person) clazz.newInstance();</span><br><span class="line">        System.out.println(per);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>1.2 创建对象成功的满足条件：</p>
<ol>
<li><p>要求运行时类中必须提供一个空参的构造器</p>
</li>
<li><p>要求提供的空参构造器的权限要足够</p>
</li>
</ol>
<p>1.3 JavaBean中要给一个当前类提供一个公共的空参构造器的意义</p>
<p>场景1：子类对象在实例化时，子类的构造器的首行默认调用父类空参的构造器。</p>
<p>场景2：在反射中，经常用来创建运行时类的对象。那么我要求各个运行时类都提供一个空参的构造器，便于我们编写</p>
<p>创建运行时类对象的代码</p>
<p>1.4在jdk9中标识为过时，替换成什么结构</p>
<p>通过Constructor类调用newInstance(…)</p>
<h2 id="2-获取运行时类的内部结构"><a href="#2-获取运行时类的内部结构" class="headerlink" title="2.获取运行时类的内部结构"></a>2.获取运行时类的内部结构</h2><p>2.1获取运行时类的内部结果1：所有属性、所有方法、所有构造器</p>
<p>2.2获取运行时类的内部结果2：父类、接口、包、带泛型的父类、父类的泛型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.alugg.reflection.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//运行时类的父类</span></span><br><span class="line">    <span class="type">Type</span> <span class="variable">superclass</span> <span class="operator">=</span> clazz.getGenericSuperclass();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//运行时类的接口</span></span><br><span class="line">    Class[] interfaces = clazz.getInterfaces();</span><br><span class="line">    <span class="keyword">for</span>(Class c:interfaces)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//运行时类的包</span></span><br><span class="line">    <span class="type">Package</span> <span class="variable">pack</span> <span class="operator">=</span> clazz.getPackage();</span><br><span class="line">    <span class="comment">//运行时类的父类的泛型</span></span><br><span class="line">    <span class="type">Type</span> <span class="variable">superclass1</span> <span class="operator">=</span> clazz.getGenericSuperclass();</span><br><span class="line">    <span class="comment">//如果父类是带泛型的，则可以墙砖为Parameterized</span></span><br><span class="line">    <span class="type">ParameterizedType</span> <span class="variable">paramType</span> <span class="operator">=</span> (ParameterizedType) superclass1;</span><br><span class="line">    <span class="comment">//调用getActualTypeArguments()获取带泛型的参数，结果是一个数组，因为可能有多个泛型参数</span></span><br><span class="line">    Type[] arguments = paramType.getActualTypeArguments();</span><br><span class="line">    System.out.println(((Class)arguments[<span class="number">0</span>]).getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="3-调用指定的结构：指定的属性、方法、构造器"><a href="#3-调用指定的结构：指定的属性、方法、构造器" class="headerlink" title="3.调用指定的结构：指定的属性、方法、构造器"></a>3.调用指定的结构：指定的属性、方法、构造器</h2><p>3.1<strong>调用指定属性:</strong></p>
<p>实例属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, NoSuchFieldException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">per</span> <span class="operator">=</span> (Person)clazz.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.通过Class实例调用getDeclaredField(String fieldName）获取运行时类指定的属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">nameField</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="comment">//2.setAccessible(true),确保此属性是可以访问的</span></span><br><span class="line">    nameField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//3.获取或设置此属性的值</span></span><br><span class="line">    nameField.set(per,<span class="string">&quot;alugg&quot;</span>);</span><br><span class="line">    System.out.println(nameField.get(per));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态类属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//private static String info;</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, NoSuchFieldException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.通过Class实例调用getDeclaredField(String fieldName）获取运行时类指定的属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">infoField</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;info&quot;</span>);</span><br><span class="line">    <span class="comment">//2.setAccessible(true),确保此属性是可以访问的</span></span><br><span class="line">    infoField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//3.获取或设置此属性的值</span></span><br><span class="line">    infoField.set(Person.class,<span class="string">&quot;xixixhaha&quot;</span>);</span><br><span class="line">    System.out.println(infoField.get(Person.class));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>3.2<strong>调用方法</strong></p>
<p>实例方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//private String showNation(String nation, int age)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">per</span> <span class="operator">=</span> (Person) clazz.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.通过Class的实例调用getDeclaredMthod(String methodName, Class ... args),获取指定的方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">showNationMethod</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;showNation&quot;</span>, String.class, <span class="type">int</span>.class)</span><br><span class="line">    <span class="comment">//2.setAccessible（true)：确保此方法是可访问的</span></span><br><span class="line">    showNationMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//3.通过method实例调用invoke(Object obj, Object .., objs),即对Method对应的方法的调用</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">returnValue</span> <span class="operator">=</span> showNationMethod.invoke(per,<span class="string">&quot;chnxxx&quot;</span>);</span><br><span class="line">    System.out.println(returnValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类静态方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//public static void showInfo()</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="comment">//1.通过Class的实例调用getDeclaredMthod(String methodName, Class ... args),获取指定的方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">showNationMethod</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;showInfo&quot;</span>);</span><br><span class="line">    <span class="comment">//2.setAccessible（true)：确保此方法是可访问的</span></span><br><span class="line">    showNationMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//3.通过method实例调用invoke(Object obj, Object .., objs),即对Method对应的方法的调用</span></span><br><span class="line">    <span class="comment">//如果Method对应的方法的返回值为void，则invoke()返回值为null</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">returnValue</span> <span class="operator">=</span> showNationMethod.invoke(<span class="literal">null</span>);</span><br><span class="line">    System.out.println(returnValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3.3调用构造器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//private Person(String name, int age)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="comment">//1.通过Class的实例调用getDeclaredConstructor(Class ... args) 获取指定参数类型的构造器</span></span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">    <span class="comment">//2.setAccessible(true)：确保此构造器是可以访问的</span></span><br><span class="line">    constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//3.通过Constructor实例调用newInstance(Object ... objs),返回一个运行时类的实例。</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">tom</span> <span class="operator">=</span> (Person) constructor.newInstance(<span class="string">&quot;TOM&quot;</span>, <span class="number">12</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-获取注解信息"><a href="#4-获取注解信息" class="headerlink" title="4.获取注解信息"></a>4.获取注解信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Customer.class;</span><br><span class="line">    <span class="type">Table</span> <span class="variable">annotation</span> <span class="operator">=</span> (Table) clazz.getDeclaredAnnotation(Table.class);</span><br><span class="line">    System.out.println(annotation.value());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取属性声明的注解</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">nameField</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="type">Column</span> <span class="variable">nameColumn</span> <span class="operator">=</span> nameField.getDeclaredAnnotation(Column.class);</span><br><span class="line">    System.out.println(nameColumn.columnName());</span><br><span class="line">    System.out.println(nameColumn.columnType());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="反射的好处，为什么需要反射，使用的场合"><a href="#反射的好处，为什么需要反射，使用的场合" class="headerlink" title="反射的好处，为什么需要反射，使用的场合"></a>反射的好处，为什么需要反射，使用的场合</h2><h2 id="实现反射的类有哪些？"><a href="#实现反射的类有哪些？" class="headerlink" title="实现反射的类有哪些？"></a>实现反射的类有哪些？</h2><h2 id="反射是如何实现？"><a href="#反射是如何实现？" class="headerlink" title="反射是如何实现？"></a>反射是如何实现？</h2><h2 id="Class类的作用和生成Class对象有哪些"><a href="#Class类的作用和生成Class对象有哪些" class="headerlink" title="Class类的作用和生成Class对象有哪些"></a>Class类的作用和生成Class对象有哪些</h2><h2 id="Class-forName-会调用哪些方法？会调用构造方法吗？加载的类放在哪？"><a href="#Class-forName-会调用哪些方法？会调用构造方法吗？加载的类放在哪？" class="headerlink" title="Class.forName()会调用哪些方法？会调用构造方法吗？加载的类放在哪？"></a>Class.forName()会调用哪些方法？会调用构造方法吗？加载的类放在哪？</h2><p>Class.forName（）会执行执行类构造器<clinit>()方法</p>
<p>不会调用构造方法</p>
<p>加载的类放在方法区</p>
<h2 id="类的加载流程"><a href="#类的加载流程" class="headerlink" title="类的加载流程"></a>类的加载流程</h2><h2 id="创建对象有几种方法"><a href="#创建对象有几种方法" class="headerlink" title="创建对象有几种方法"></a>创建对象有几种方法</h2><h2 id="Java反射创建效率高还是new创建高？"><a href="#Java反射创建效率高还是new创建高？" class="headerlink" title="Java反射创建效率高还是new创建高？"></a>Java反射创建效率高还是new创建高？</h2><p>new高</p>
<h2 id="如何利用反射机制访问类的方法或获取私有属性"><a href="#如何利用反射机制访问类的方法或获取私有属性" class="headerlink" title="如何利用反射机制访问类的方法或获取私有属性"></a>如何利用反射机制访问类的方法或获取私有属性</h2>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/12/javaday14_InetAddress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/12/javaday14_InetAddress/" class="post-title-link" itemprop="url">java-Day14——网络</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-12 20:18:01" itemprop="dateCreated datePublished" datetime="2023-10-12T20:18:01+08:00">2023-10-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="InetAddress的使用"><a href="#InetAddress的使用" class="headerlink" title="InetAddress的使用"></a>InetAddress的使用</h1><h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>InetAddress类的一个实例就代表一个具体的ip地址</p>
<h2 id="实例化方式"><a href="#实例化方式" class="headerlink" title="实例化方式"></a>实例化方式</h2><p>InetAddress getByName(String host):获取指定ip对应的InetAddress的实例</p>
<p>InetAddress getLocalHost():获取本地ip对应的InetAddress的实例</p>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><p>getHostName():</p>
<p>getHostAddress()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">netTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//1.实例化</span></span><br><span class="line">        <span class="comment">//getByName(String host):获取指定ip对应的InetAddress的实例</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">inet1</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;192.168.23.31&quot;</span>);</span><br><span class="line">        System.out.println(inet1);</span><br><span class="line"></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">inet2</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">        System.out.println(inet2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//getLocalHost():获取本地Ip对应的InetAddress的实例</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">inet3</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">        System.out.println(inet3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.两个常用方法</span></span><br><span class="line">        System.out.println(inet1.getHostName());</span><br><span class="line">        System.out.println(inet1.getHostAddress());</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">catch</span> (UnknownHostException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Socket类"><a href="#Socket类" class="headerlink" title="Socket类"></a>Socket类</h1><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TCPTest2</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">client</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.创建Socket</span></span><br><span class="line">            <span class="type">InetAddress</span> <span class="variable">inetAddress</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9090</span>;</span><br><span class="line">            socket = <span class="keyword">new</span> <span class="title class_">Socket</span>(inetAddress, port);</span><br><span class="line">            <span class="comment">//2.创建File的实例、FileInputStream的实例</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xx.jpg&quot;</span>);</span><br><span class="line">            fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">            <span class="comment">//3.通过Socket获取输出流</span></span><br><span class="line">            os = socket.getOutputStream();</span><br><span class="line">            <span class="comment">//读写数据</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len=fis.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.接收来自于服务端的数据</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">            <span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">            <span class="type">byte</span>[] buffer1 = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">5</span>];</span><br><span class="line">            <span class="type">int</span> len1;</span><br><span class="line">            <span class="keyword">while</span>((len1 = is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(buffer1,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(baos.toString());</span><br><span class="line">            <span class="comment">//客户端不再继续发送数据</span></span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//5.关闭Socket和相关流</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">server</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建ServerSocket</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9090</span>;</span><br><span class="line">            serverSocket = <span class="keyword">new</span> <span class="title class_">ServerSocket</span>();</span><br><span class="line">            <span class="comment">//2.接受来自于客户端的socket：accept(_</span></span><br><span class="line">            socket = serverSocket.accept();</span><br><span class="line">            <span class="comment">//3.通过Socket获取一个输入流</span></span><br><span class="line">            is = socket.getInputStream();</span><br><span class="line">            <span class="comment">//4.创建File类的实例、FileOutputStream</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx_copy.jpg&quot;</span>);</span><br><span class="line">            fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">            <span class="comment">//5.读写过程</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//6.服务端发送数据给客户端</span></span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">            os.write(<span class="string">&quot;pic recevied&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//6关闭相关Socket和流</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                serverSocket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UrlTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;http://www.google.com&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(str);</span><br><span class="line"></span><br><span class="line">            System.out.println(url.getProtocol());</span><br><span class="line">            System.out.println(url.getHost());</span><br><span class="line">            System.out.println(url.getPort());</span><br><span class="line">            System.out.println(url.getFile());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/11/javaday13_IO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/11/javaday13_IO/" class="post-title-link" itemprop="url">java-Day13——IO</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-11 19:18:01" itemprop="dateCreated datePublished" datetime="2023-10-11T19:18:01+08:00">2023-10-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h1><h2 id="File类的理解"><a href="#File类的理解" class="headerlink" title="File类的理解"></a>File类的理解</h2><ul>
<li>File类位于java.io包下。</li>
<li>File类的一个对象，对应于操作系统下的一个文件或一个文件目录</li>
<li>File类中声明了新建、删除、获取名称、重命名等方法，并没有涉及到文件内容的读写操作。要想实现文件内容的读写，需要使用io流。</li>
<li>File类的对象，通常是作为io流操作的文件的端点出现。<ul>
<li>代码层面，将File类对象作为参数传递到IO流相关类的构造器中。</li>
</ul>
</li>
</ul>
<h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><ul>
<li>File(String pathname) :以pathname为路径创建File对象，可以是绝对路径或者相对路径</li>
<li>File(String parent, String child):以parent为父路径,child为子路径创建file对象</li>
<li>File(File parent, String child) 根据一个父File对象和子文件路径创建file对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">/*        public File(String pathname)</span></span><br><span class="line"><span class="comment">        方式1：绝对路径：windows操作系统为例，包括盘符在内的文件或文件目录的完整路径</span></span><br><span class="line"><span class="comment">        方式2：相对路径:相对于某一个文件目录的相对位置</span></span><br><span class="line"><span class="comment">       	 在IDEA中：</span></span><br><span class="line"><span class="comment">       	 		单元测试方法：相对于当前Module来讲</span></span><br><span class="line"><span class="comment">                main方法：相对于当前project来讲</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/io\\hello.txt&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">file2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// public File(String parent, String child)</span></span><br><span class="line">        <span class="comment">// 参数1：一定是一个文件目录(String方式)，参数2：可以是一个文件，也可以是一个文件目录</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\io&quot;</span>,<span class="string">&quot;abc.txt&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">file2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;ab&quot;</span>);</span><br><span class="line">        <span class="comment">//参数1：一定是一个文件目录，参数2：可以是一个文件，也可以是一个文件目录</span></span><br><span class="line">        <span class="comment">// public File(File parent, String child)</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(file2,<span class="string">&quot;ab&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="获取文件和目录基本信息"><a href="#获取文件和目录基本信息" class="headerlink" title="获取文件和目录基本信息"></a>获取文件和目录基本信息</h3><ul>
<li>String getName():获取名称</li>
<li>String getPath():获取路径</li>
<li>String getAbsolutePaht():获取绝对路径</li>
<li>File getAbsoluteFile():获取绝对路径表示的文件</li>
<li>String getParent()：获取上层文件目录路径。不能获取目录的长度</li>
<li>long length()：获取文件长度（字节数）.不能获取目录的长度</li>
<li>long lastModified()：获取最后一次的修改时间，毫秒值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello.txt&quot;</span>);</span><br><span class="line">    System.out.println(file.getName());<span class="comment">//hello.txt</span></span><br><span class="line">    System.out.println(file.getPath());<span class="comment">//hello.txt 因为是相对路径</span></span><br><span class="line">    System.out.println(file.getAbsolutePath());<span class="comment">//D:\javaSE\JavaSE\Chapter15_file\hello.txt</span></span><br><span class="line">    System.out.println(file.getAbsoluteFile());<span class="comment">////D:\javaSE\JavaSE\Chapter15_file\hello.txt返回的是对象</span></span><br><span class="line">    System.out.println(file.getParent());<span class="comment">//null 因为是相对路径</span></span><br><span class="line">    System.out.println(file.length());<span class="comment">//6</span></span><br><span class="line">    System.out.println(file.lastModified());<span class="comment">//1697208159548时间戳</span></span><br><span class="line"></span><br><span class="line">    <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\javaSE\\Chapter15_file\\hello.txt&quot;</span>);</span><br><span class="line">    System.out.println(file1.getName());<span class="comment">//hello.txt</span></span><br><span class="line">    System.out.println(file1.getPath());<span class="comment">//D:\javaSE\Chapter15_file\hello.text</span></span><br><span class="line">    System.out.println(file1.getAbsolutePath());<span class="comment">//D:\javaSE\Chapter15_file\hello.text</span></span><br><span class="line">    System.out.println(file1.getAbsoluteFile());<span class="comment">//D:\javaSE\Chapter15_file\hello.text</span></span><br><span class="line">    System.out.println(file1.getParent());<span class="comment">//D:\javaSE\Chapter15_file</span></span><br><span class="line">    System.out.println(file1.length()); </span><br><span class="line">    System.out.println(file1.lastModified());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="列出目录的下一级"><a href="#列出目录的下一级" class="headerlink" title="列出目录的下一级"></a>列出目录的下一级</h3><ul>
<li>String[] list():返回一个String数组，表示该File目录中的所有子文件或目录。</li>
<li>File[] listFiles():返回一个File数组，表示该File目录中的所有子文件或目录。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\javaSE\\javaSE&quot;</span>);</span><br><span class="line">    String[] fileArr = file1.list();</span><br><span class="line">    <span class="keyword">for</span>(String s:fileArr)&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    File[] files = file1.listFiles();</span><br><span class="line">    <span class="keyword">for</span>(File f:files)&#123;</span><br><span class="line">        System.out.println(f);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h3><ul>
<li>file1.renamTo(file2):把文件重命名为指定的文件路径。file1必须存在且file2不存在</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello.txt&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">file2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\javaSE\\JavaSE\\Chapter15_file\\hello2.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">renameSuccess</span> <span class="operator">=</span> file1.renameTo(file2);</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断功能的方法"><a href="#判断功能的方法" class="headerlink" title="判断功能的方法"></a>判断功能的方法</h3><ul>
<li>boolean exits():此File表示的文件或目录是否实际存在</li>
<li>boolean isDirectory():此File表示的是否为目录</li>
<li>boolean isFile():此File表示的是否为文件</li>
<li>boolean canRead():判断是否可读</li>
<li>boolean canWrite():判断是否可写</li>
<li>boolean isHidden():判断是否隐藏</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello2.txt&quot;</span>);</span><br><span class="line">    System.out.println(file1.exists());</span><br><span class="line">    System.out.println(file1.isDirectory());</span><br><span class="line">    System.out.println(file1.isFile());</span><br><span class="line">    System.out.println(file1.canRead());</span><br><span class="line">    System.out.println(file1.canWrite());</span><br><span class="line">    System.out.println(file1.isHidden());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="创建和删除类型"><a href="#创建和删除类型" class="headerlink" title="创建和删除类型"></a>创建和删除类型</h3><ul>
<li>boolean createNewFile():创建文件。若文件存在，则不创建，返回false</li>
<li>boolean mkdir():创建文件目录。如果此文件目录存在，就不创建了。如果此文件目录的上册目录不存在，也不创建</li>
<li>boolean mkdirs():创建文件目录。如果上层文件目录不存在，一并创建</li>
<li>boolean delete():删除文件或文件夹</li>
<li>注意：java中的删除不走回收站。要删除一个文件目录，请主要该文件目录内不能包含文件或者文件目录</li>
</ul>
<h1 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h1><p>java中对于数据的输入&#x2F;输出操作以“流”的方式进行，可以看作是一种数据的流动</p>
<h2 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h2><ul>
<li>流向的不同：输入流、输出流</li>
<li>处理单位的不同：字节流、字符流</li>
<li>流的角色的不同：节点流、处理流</li>
</ul>
<p> <a target="_blank" rel="noopener" href="https://imgloc.com/image/XaZad"><img src="https://i.imgs.ovh/2023/10/13/XaZad.png" alt="XaZad.png"></a></p>
<h2 id="流的API"><a href="#流的API" class="headerlink" title="流的API"></a>流的API</h2><p>IO流共涉及40多个类，实际上非常规则，都是从如下4个抽象基类派生的。</p>
<table>
<thead>
<tr>
<th>（抽象基类）</th>
<th>输入流</th>
<th>输出流</th>
</tr>
</thead>
<tbody><tr>
<td>字节流</td>
<td>InputStream</td>
<td>OutputStream</td>
</tr>
<tr>
<td>字符流</td>
<td>Reader</td>
<td>Writer</td>
</tr>
</tbody></table>
<h1 id="节点流"><a href="#节点流" class="headerlink" title="节点流"></a>节点流</h1><h2 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h2><h3 id="FileReader-FileWriter的使用"><a href="#FileReader-FileWriter的使用" class="headerlink" title="FileReader\FileWriter的使用"></a>FileReader\FileWriter的使用</h3><p><strong>执行步骤：</strong></p>
<ol>
<li>创建读或写的File类对象</li>
<li>创建输入流或输出流</li>
<li>具体的读入或写出的过程<ol>
<li>读入：read(char[] cbuffer)</li>
<li>写出：write(String str)&#x2F; write(char[] cbuffer,0,len)</li>
</ol>
</li>
<li>关闭流资源</li>
</ol>
<p><strong>注意点：</strong></p>
<ol>
<li><p>因为涉及流资源关闭操作，所以出现异常的花，需要使用try-catch-finally的方式来处理异常</p>
</li>
<li><p>对于输入流来讲，要求File类的对象对应的物理磁盘上的文件必须存在。否则会报FileNotFoundException</p>
<p>对于输出流来讲，File类的对象对应的物理磁盘上的文件可以不存在。</p>
<ul>
<li>如果此文件不存在，则在输出的过程中，会自动创建此文件，并写出数据到此文件中。</li>
<li>如果此文件存在，使用FileWriter(file file)或FileWriter(File file, <strong>false</strong>):输出数据过程中，会创建同名的文件对现有的文件进行覆盖。</li>
<li>FileWriter(File file, <strong>true</strong>):输出数据过程中，会在现有的文件的末尾追加写出的内容。</li>
</ul>
<p>​</p>
</li>
</ol>
<p>	</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建File类的对象，对应着hello.txt文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.创建输入型的字符流，用于读取数据</span></span><br><span class="line">        fileReader = <span class="keyword">new</span> <span class="title class_">FileReader</span>(file1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.读取数据，并显示在控制台</span></span><br><span class="line">        <span class="comment">//方式2.read(char[] cbuffer)</span></span><br><span class="line">        <span class="type">char</span>[] cbuffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len=fileReader.read(cbuffer))!= -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>; i&lt;len;i++)&#123;</span><br><span class="line">                System.out.println(cbuffer[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.流资源的关闭操作</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fileReader != <span class="literal">null</span>)&#123;</span><br><span class="line">            fileReader.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 需求：将内存中的数据写出到指定的文件中</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建File类的对象，指明要写出的文件的名称</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;info.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//2.创建输出流</span></span><br><span class="line">        fw = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file,<span class="literal">false</span>);<span class="comment">//append是否在原文件追加</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.写出的具体过程</span></span><br><span class="line">        <span class="comment">//输出的方法：write(String str)/write(char[] cdata)</span></span><br><span class="line">        fw.write(<span class="string">&quot;I love&quot;</span>);</span><br><span class="line">        fw.write(<span class="string">&quot;you love&quot;</span>);</span><br><span class="line">        fw.write(<span class="string">&quot;xixi&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fw!=<span class="literal">null</span>)&#123;</span><br><span class="line">            fw.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 需求：复制一份hello.txt文件，命名为hello_copy.txt </span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建File类的对象</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello.txt&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello_copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.创建输入流、输出流</span></span><br><span class="line">        fr = <span class="keyword">new</span> <span class="title class_">FileReader</span>(srcFile);</span><br><span class="line">        fw = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(destFile);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.数据的读入和写出的过程</span></span><br><span class="line">        <span class="type">char</span>[] cbuffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="type">int</span> len;<span class="comment">//记录每次读入到cbuffer中的字符个数</span></span><br><span class="line">        <span class="keyword">while</span> ((len = fr.read(cbuffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            fw.write(cbuffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fw!=<span class="literal">null</span>)&#123;</span><br><span class="line">            fw.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fr!=<span class="literal">null</span>) &#123;</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h2><h3 id="FileInputStream-FileOutputStream"><a href="#FileInputStream-FileOutputStream" class="headerlink" title="FileInputStream\FileOutputStream"></a>FileInputStream\FileOutputStream</h3><p><strong>使用步骤</strong>：</p>
<ol>
<li>创建读或写的File类对象</li>
<li>创建输入流或输出流</li>
<li>具体的读入或写出的过程<ol>
<li>读入：read(byte[] buffer)</li>
<li>写出：write(byte[] buffer,0,len)</li>
</ol>
</li>
<li>关闭流资源</li>
</ol>
<p><strong>注意点</strong>：</p>
<ul>
<li>在文件流的注意点基础之上。 字符流只能用来操作文本文件，不能用来处理非文本文件。</li>
<li>对于字节流，通常是用来处理非文本文件。但是涉及到文本文件的复制操作，也可以使用字节流。</li>
</ul>
<p>说明：</p>
<p>文本文件：.txt、 .java、.c</p>
<p>非文本文件：.doc 、 .xls 、.jpg、.pdf 、.mp3</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileStreamTest</span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.创建相关的File类的对象</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx.jpg&quot;</span>);</span><br><span class="line">            <span class="type">File</span> <span class="variable">desFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx_copy.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.创建相关的字节流</span></span><br><span class="line">            fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile);</span><br><span class="line">            fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(desFile);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3.数据读取和写出</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">//1kb</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4.关闭资源</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(fos!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(fos!=<span class="literal">null</span>)&#123;</span><br><span class="line">                fis.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h1><table>
<thead>
<tr>
<th>抽象基类</th>
<th>节点流（文件流）</th>
<th>缓冲流</th>
</tr>
</thead>
<tbody><tr>
<td>InputStream</td>
<td>FileInputStream</td>
<td>BufferedInputStream</td>
</tr>
<tr>
<td>OutputStream</td>
<td>FileOutputStream</td>
<td>BufferedOutputStream</td>
</tr>
<tr>
<td>Reader</td>
<td>FileReader</td>
<td>BufferedReader</td>
</tr>
<tr>
<td>Writer</td>
<td>FileWriter</td>
<td>BufferedWriter</td>
</tr>
</tbody></table>
<h2 id="缓冲流的作用"><a href="#缓冲流的作用" class="headerlink" title="缓冲流的作用"></a>缓冲流的作用</h2><p>减少与磁盘的交互，提升文件读写的效率。</p>
<p>缓冲区：内部提供了一个数组，将读取或写出的数据，现在此数组中缓冲。达到一定程度时，集中性的写出。</p>
<h2 id="4个缓冲流"><a href="#4个缓冲流" class="headerlink" title="4个缓冲流"></a>4个缓冲流</h2><p>处理非文本文件的字节流：                       方法</p>
<ul>
<li><p>BufferedInputStream                        read(byte[] buffer)</p>
</li>
<li><p>BufferedOutputStream                        write(byte[] buffer,0,len)</p>
</li>
</ul>
<p>处理文本文件的字符流</p>
<ul>
<li>BufferedReader                                  read(char[]  cbuffer)  &#x2F; readLine()</li>
<li>BufferedWriter                                     write(char[] cbuffer, 0, len)</li>
</ul>
<h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol>
<li><p>创建File对象、流的对象（包括文件流、缓冲流）</p>
</li>
<li><p>使用缓冲流实现读取数据或写出数据的过程</p>
<p>​	读取：int read(char[] cbuf&#x2F;byte[] buffer) :每次将数据读入到cbuf&#x2F;buffer数组中，并返回读入到数组中</p>
<p>​	写出： void write(String str)&#x2F;write(char[] cbuf):将str或cbuf写出到文件中</p>
<p>​				void write(byte[] buffer) 将byte写出到文件中</p>
</li>
<li><p>关闭资源</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferInputTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.创建相关的File类的对象</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx.jpg&quot;</span>);</span><br><span class="line">            <span class="type">File</span> <span class="variable">desFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx_copy.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.创建相关的字节流、缓冲流</span></span><br><span class="line">            fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile);</span><br><span class="line">            fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(desFile);</span><br><span class="line"></span><br><span class="line">            bis = <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(fis);</span><br><span class="line">            bos = <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(fos);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3.数据读取和写出</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">//1kb</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = bis.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                bos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4.关闭资源</span></span><br><span class="line">            <span class="comment">//外层流的关闭会自动关闭内存流</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(bis!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    bis.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(bos!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    bos.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h1><p>字符编码：字符、字符串、字符数组–》字节、字节数组</p>
<p>字符解码：字节、字节数组–》字符、字符串、字符数组</p>
<p><strong>如果希望程序在读取文本时，不出现乱码</strong></p>
<p>解码时使用的字符集必须与当初编码时使用的字符集一致</p>
<p>解码集必须要与编码集兼容。</p>
<p><strong>作用</strong>：实现字节与字符之间的转换</p>
<p><strong>API</strong>：</p>
<p>InputStreamReader:将一个输入型的字节流转换为输入型的字符流</p>
<p>OutputStreamWriter:讲一个输出型的字符流转换为输出型的字节流</p>
<p><strong>关于字符集的理解</strong></p>
<ul>
<li><p>ascii:主要用来存储a，b,c英文字符和1,2,3常用标点字符。每个字符1个字节。	</p>
</li>
<li><p>iso-8859-1:了解，每个字符占用1个字符。向下兼容ascii</p>
</li>
<li><p>gbk:用来存储包括中文简体繁体，a,b,c等英文字符和1,2,3，常用的标点符号等字符。中文字符使用2个字节，向下兼容ascii。英文1个字节。</p>
</li>
<li><p>utf-8：可以用来存储世界范围内主要的语言的所有的字符。使用1-4个不等的字节表示一个字符。中文使用3个字节，英文1个。</p>
</li>
</ul>
<p><strong>内存中的字符</strong></p>
<p>一个字符（char）占用2个字节。在内存使用的字符集称为Unicode字符集。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="comment">//1.造文件</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx_gbk.txt&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">file2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx_gbk2utf8&quot;</span>);</span><br><span class="line">    <span class="comment">//2.造流</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file1);</span><br><span class="line">    <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fis,<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file2);</span><br><span class="line">    <span class="type">OutputStreamWriter</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(fos,<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.读写过程</span></span><br><span class="line">    <span class="type">char</span>[] cBuffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = isr.read(cBuffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">        oos.write(cBuffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;操作完成&quot;</span>);</span><br><span class="line">    <span class="comment">//4.关闭资源</span></span><br><span class="line"></span><br><span class="line">    oos.close();</span><br><span class="line">    isr.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="对象流"><a href="#对象流" class="headerlink" title="对象流"></a>对象流</h1><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>考虑将内存中定义的变量保存在文件中</p>
<p>数据流（只支持基本数据类型和字符串的读写，而不支持其他jav对象的类型）</p>
<ul>
<li>DataOutputStream:将内存中基本数据类型、String类型的变量写入具体的文件中</li>
<li>DataInputStream:将文件中保存的数据还原为内存的基本数据类型、String类型的变量。</li>
</ul>
<p><strong>对象流</strong></p>
<ul>
<li>ObjectOutputStream:将java基本数据类型和对象写入字节输出流中。通过在流中使用文件可以实现java各种基本数据类型的数据以及对象的持久存储</li>
<li>ObjectInputStream:ObjectInputStream对以前使用ObjectOutputStream写出的基本数据类型的数据和对象进行读入操作，保存在内存中。</li>
</ul>
<h2 id="对象的序列化机制"><a href="#对象的序列化机制" class="headerlink" title="对象的序列化机制"></a>对象的序列化机制</h2><p>对象序列化机制允许把<strong>内存中java对象转</strong>换成平台无关的<strong>二进制流</strong>，从而允许把这种二进制<strong>流持久地保存在磁盘</strong>上，或通过网络将这种二进制流传输到另一个网络节点。&#x2F;&#x2F;当其他程序获取了这种二进制流，就可以恢复成原来的java对象。</p>
<ul>
<li>序列化过程：ObjectOutputStream流实现。将内存中的java对象保存在文件中或通过网络传输出去</li>
<li>反序列化过程：使用ObjectInputStream实现。将文件中的数据或网络传输过来的数据还原为内存中的java的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectOutputTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xx.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file));</span><br><span class="line">        oos.writeUTF(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">        oos.writeObject(<span class="string">&quot;xixihaha&quot;</span>);</span><br><span class="line">        oos.flush();</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xx.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> ois.readUTF();</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> (String) ois.readObject();</span><br><span class="line">        System.out.println(str1);</span><br><span class="line">        System.out.println(str2);</span><br><span class="line"></span><br><span class="line">        ois.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="自定义类实现序列化的要求"><a href="#自定义类实现序列化的要求" class="headerlink" title="自定义类实现序列化的要求"></a>自定义类实现序列化的要求</h2><ul>
<li>自定义类需要实现接口：Serializable</li>
<li>要求自定义类声明一个全局常量：static final long serialVersionUID &#x3D; 42234234L;用于唯一的标识当前的类</li>
<li>要求自定义类的各个属性必须是可序列化的。<ul>
<li>对于基本数据类型的属性：默认可序列化</li>
<li>对于引用数据类型：需要实现Serializable接口</li>
</ul>
</li>
</ul>
<p>注意点：</p>
<ol>
<li><p>如果不声明全局常量，系统会自动声明生产一个针对于当前类的serialVersionUID。</p>
<p>如果修改此类的话，会导致serialVersionUID变换，进而导致反序列化时，出现InvalidClassException异常</p>
</li>
<li><p>类中的属性如果声明为transient或static，则不会序列化。</p>
</li>
</ol>
<h1 id="其他流"><a href="#其他流" class="headerlink" title="其他流"></a>其他流</h1><p>标准输入流、标准输出流、system.in、system.out</p>

      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/10/javaday12_codeforHashMap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/10/javaday12_codeforHashMap/" class="post-title-link" itemprop="url">java-Day12——HashMap源码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-10 19:18:01" itemprop="dateCreated datePublished" datetime="2023-10-10T19:18:01+08:00">2023-10-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>6.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>数据结构就是一种程序设计优化方法论，研究数据的“逻辑结构“和”物理结构”以及它们之间相互关系，并对这种结构定义相应的”运算，目的是加快程序的执行速度、减少内存的占用空间</p>
<h2 id="研究对象"><a href="#研究对象" class="headerlink" title="研究对象"></a>研究对象</h2><p><strong>研究对象1：数据之间的逻辑关系</strong></p>
<ul>
<li><p>集合结构</p>
</li>
<li><p>线性结构：一对一</p>
</li>
<li><p>树形结构：一对多</p>
</li>
<li><p>图形结构：多对多</p>
</li>
</ul>
<p><strong>研究对象2：数据的存储结构</strong></p>
<ul>
<li>顺序结构</li>
<li>链式结构</li>
<li>索引结构</li>
<li>散列结构</li>
</ul>
<p>开发中，更习惯于如下的方式理解存储结构</p>
<ul>
<li>线性表（一对一）：一维数组、单向链表、双向链表、栈、队列</li>
<li>树（一对多）：各种树。 二叉树、B+树</li>
<li>图（多对多）：</li>
<li>哈希表：HashMap、HashSet</li>
</ul>
<p>研究对象3：相关算法操作</p>
<ul>
<li><p>分配资源、建立结构、释放资源</p>
</li>
<li><p>插入和删除</p>
</li>
<li><p>获取和遍历</p>
</li>
<li><p>修改和排序</p>
</li>
</ul>
<h1 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h1><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><p><strong>单向链表</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line"></span><br><span class="line">	Object data;</span><br><span class="line"></span><br><span class="line">	Node next;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Node</span> <span class="variable">node1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;AA&quot;</span>);</span><br><span class="line"><span class="type">Node</span> <span class="variable">node2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;BB&quot;</span>);</span><br><span class="line">node1.next = node2;</span><br></pre></td></tr></table></figure>

<p><strong>双向链表</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	Node prev;</span><br><span class="line">	Object data;</span><br><span class="line">	Node next;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node prev, Object data, Node next)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">Node</span> <span class="variable">node1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>, <span class="string">&quot;aa&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="type">Node</span> <span class="variable">node2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(node1, <span class="string">&quot;bb&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="type">Node</span> <span class="variable">node3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(node2,<span class="string">&quot;cc&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">node1.next = node2;</span><br><span class="line">node2.next = node3;</span><br></pre></td></tr></table></figure>

<h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class TreeNode&#123;</span><br><span class="line">	TreeNode parent; </span><br><span class="line">	TreeNode left;</span><br><span class="line">	Object data;</span><br><span class="line">	TreeNode right;</span><br><span class="line">	</span><br><span class="line">	public TreeNode(Object data)&#123;</span><br><span class="line">		this.data = data;</span><br><span class="line">	&#125;</span><br><span class="line">	public TreeNode(TreeNode left, Object data, TreeNode right)&#123;</span><br><span class="line">		this.left =left;</span><br><span class="line">		this.data = data;</span><br><span class="line">		this.right=right;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TreeNode node1 = new TreeNode(null, null,&quot;AA&quot;, null);</span><br><span class="line">TreeNode leftNode = new TreeNode(node1, null,&quot;bb&quot;, null);</span><br><span class="line">TreeNode rightNode = new TreeNode(node1, null,&quot;cc&quot;, null);</span><br><span class="line">node1.right = rightNode;</span><br><span class="line">node1.left = leftNode;</span><br></pre></td></tr></table></figure>

<h2 id="栈FILO"><a href="#栈FILO" class="headerlink" title="栈FILO"></a>栈FILO</h2><ul>
<li>属于抽象数据类型（ADT）</li>
<li>可以使用数组或链表来构建</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>&#123;</span><br><span class="line">    <span class="comment">//数组实现栈</span></span><br><span class="line">    Object[] values</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Stack</span><span class="params">(<span class="type">int</span> length)</span>&#123;</span><br><span class="line">        values = <span class="keyword">new</span> <span class="title class_">Object</span>[length];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(Object ele)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(size&gt;=values.length)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;栈空间已满&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        values[size]=ele;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">pop</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(size &lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;栈空间已空&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> values[size-<span class="number">1</span>];</span><br><span class="line">        values[size-<span class="number">1</span>] = <span class="literal">null</span>;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="队列FIFO"><a href="#队列FIFO" class="headerlink" title="队列FIFO"></a>队列FIFO</h2><ul>
<li>属于抽象数据类型（ADT）</li>
<li>可以使用数组或链表来构建</li>
</ul>
<p>class Stack{<br>    &#x2F;&#x2F;数组实现栈<br>    Object[] values<br>    int size;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>&#123;</span><br><span class="line">    Object[] values;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Queue</span><span class="params">(<span class="type">int</span> lenght)</span>&#123;</span><br><span class="line">        values = <span class="keyword">new</span> <span class="title class_">Object</span>[length];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object ele)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(size&gt;= values.length)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;队列已满，添加失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        values[size] = ele;</span><br><span class="line">        size ++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(size&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;队列已空，获取失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> values[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i= <span class="number">0</span>;i&lt;size-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            values[i] = values[i+<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        values[size - <span class="number">1</span>] = <span class="literal">null</span>;</span><br><span class="line">        size --;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="List源码"><a href="#List源码" class="headerlink" title="List源码"></a>List源码</h1><h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><p><strong>ArrayList特点</strong></p>
<ul>
<li>实现了List接口，存储有序、可以重复的数据</li>
<li>底层使用Object[]数组存储</li>
<li>线程不安全</li>
</ul>
<p><strong>ArrayList源码解析</strong></p>
<p><strong>jdk7</strong>: 如下代码执行：底层会初始化数组，数组的长度为10。Object[] elementData &#x3D; new Object[10]</p>
<p>ArrayList<String> list &#x3D; new ArrayList&lt;&gt;()</p>
<p>list.add(“AA”);&#x2F;&#x2F;elementData[0] &#x3D; “AA”;</p>
<p>list.add(“BB”); &#x2F;&#x2F;elementData[1] &#x3D; “BB”;</p>
<p>…..</p>
<p>当添加第11个元素时，底层elementData数组已满，则需要扩容。默认扩容为原来长度的1.5倍。并将原有数组中的元素赋值到新的数组中</p>
<p>**jdk8:**底层会初始化数组，即：Object[] elementData&#x3D; new Object[]{};</p>
<p>ArrayList<String> list &#x3D; new ArrayList&lt;&gt;();</p>
<p>list.add(“AA”);&#x2F;&#x2F;首次添加元素，会初始化数组 elementData &#x3D; new Object[10]; elementData[0] &#x3D; “AA”;</p>
<p>list.add(“BB”);&#x2F;&#x2F;elementData[1] &#x3D; “BB”;</p>
<p>当添加第11个元素时，底层elementData数组已满，则需要扩容。默认扩容为原来长度的1.5倍。并将原有数组中的元素赋值到新的数组中</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><strong>小结</strong></p>
<p>jdk7中类似于饿汉式</p>
<p>jdk8中类似于懒汉式</p>
<h2 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h2><p><strong>特点</strong></p>
<ul>
<li>实现了List接口，存储有序、可以重复的数据</li>
<li>底层使用了Object[]数组存储</li>
<li>线程安全</li>
</ul>
<p><strong>源码</strong></p>
<p>Vector v &#x3D; new Vector();&#x2F;&#x2F;底层初始化数组，长度为10 Object[] element &#x3D; new Object[10];</p>
<p>v.add(“aa”);</p>
<p>v.add(“bb”);</p>
<p>当前添加第11个元素时，扩容2倍</p>
<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><p><strong>特点</strong></p>
<ul>
<li>实现List接口，存储有序、可以重复的数据</li>
<li>底层使用了双向链表存储</li>
<li>线程不安全</li>
</ul>
<p><strong>源码</strong></p>
<p>LinkedList<String> list &#x3D; new LinkedList&lt;&gt;(); &#x2F;&#x2F;底层也没做啥</p>
<p>list.add(“AA”);&#x2F;&#x2F;将“AA”封装到一个Node对象中，list对象的属性first、last都指向次node对象。</p>
<p>list.add(“BB”);&#x2F;&#x2F;将“BB”封装到一个Node对象2中，对象1和对象2构成一个双向链表，同时last指向此Node对象2  </p>
<p>…..</p>
<p>因为linkedList使用的是双向链表，不需要考虑扩容问题。</p>
<h2 id="启示"><a href="#启示" class="headerlink" title="启示"></a>启示</h2><p>1.Vector不使用了</p>
<p>2.ArrayList底层使用数组结构，查找和添加（尾部添加）操作效率高，时间复杂度为O（1）</p>
<p>删除和插入操作效率低，时间复杂度为O（n)</p>
<p>LinkedList底层使用双向链表，删除和插入操作效率高，时间复杂度O（1）</p>
<p>查找和添加（尾部添加）操作效率低，时间为O（n)（添加可能O(1))</p>
<p>3.在选择了ArrayList的前提下，new ArrayList()：底层创建长度为10的数组。</p>
<p>new ArrayList(int capacity):底层创建指定capacity长度的数组。</p>
<h1 id="Map源码"><a href="#Map源码" class="headerlink" title="Map源码"></a>Map源码</h1><h2 id="HashMap源码解析"><a href="#HashMap源码解析" class="headerlink" title="HashMap源码解析"></a>HashMap源码解析</h2><p><strong>jdk7:</strong></p>
<p>&#x2F;&#x2F;创建对象的过程中，底层会初始化数组Entry[] table &#x3D; new Entry[16];</p>
<p>HashMap&lt;String, Integer&gt; map &#x3D; new HashMap&lt;&gt;();</p>
<p>map.put(“AA”, 78); &#x2F;&#x2F;“AA”和78封装到一个Entry对象总，考虑将此对象添加到table数组中。</p>
<p>…</p>
<p>添加&#x2F;修改的过程:</p>
<p>将（key1,value1)添加到当前的map中</p>
<p>首先，需要调用key所在类的hashCode()方法，计算key1对应的哈希值1，此哈希值1经过某种算法（hash())之后，得到哈希值2。</p>
<p>哈希值2再经过某种算法（indexFor())之后，就确定了(key1,value1)在数组table中的索引位置i。</p>
<ul>
<li>如果此索引位置i的数组上没有元素，则（key1,value1)添加成功  —&gt;情况1</li>
<li>如果此缩影位置i的数组上有元素（key2,value2),则需要继续比较key1和key2的哈希值2  —&gt;哈希冲突<ul>
<li>如果key1的哈希值2与key2的哈希值2不相同，则(key1,value1)添加成功。  —-&gt;情况2</li>
<li>如果key1的哈希值2与key2的哈哈希值2相同，则需要继续比较key1和key2的equals()。要调用key1所在类的equals(),将key2作为参数传递进去<ul>
<li>调用equals()，返回false:则（key1,value1)添加成功  —-&gt;情况3</li>
<li>调用equals(),返回true:则认为key1和key2是相同的。默认情况下，value1替换原有的value2.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>说明</strong>：</p>
<ul>
<li>情况1：将（key1, value1)存放到数组的索引i的位置</li>
<li>情况2，情况3：（key1,value1)元素与现有的（key2, value2)构成单向链表结构，（key1,value1)指向（key2,value2)</li>
</ul>
<p>随着不断的添加元素，在满足如下的条件的情况下，会考虑扩容：</p>
<p>（size&gt;&#x3D; threshold) &amp;&amp;(null !&#x3D;table[i])</p>
<p>当元素的个数达到临界值（-&gt;数组的长度* 加载因子）时，就考虑扩容。 默认的临界值 &#x3D; 16*0.75 –》12.</p>
<p>默认扩容为原来的两倍</p>
<p><strong>jdk8与jdk7的不同之处</strong></p>
<ol>
<li>在jdk8中，当我面创建了HashMap实例以后，底层并没有初始化table数组。当首次添加(key,value)时，进行判断，如果发现table尚未初始化，则对数组进行初始化。</li>
<li>在jdk8中，HashMap底层定义类Node内部类，替换了jdk7中的Entry内部类。意味着，我们创建的数组是Node[]</li>
<li>jdk8中，当前的(key,value)经过一系列判断之后，可以添加到当前的数组的角标i中。如果此时角标i位置上有元素。在jdk7中是将新的（key,value)指向已有的旧的元素（头插法）。而在jdk8中旧的元素指向新的（key,value)元素（尾插法）</li>
<li>jdk7：数组+单向链表；jdk8:数组+单向链表+红黑树。</li>
</ol>
<p>​		什么时候会使用红黑树：如果数组索引i位置上的元素的个数达到8，并且数组的长度达到64时，我们就将此索引i位置上的多个元素改为使用红黑树的结构进行存储。 （为什么修改呢？红黑树进行put()&#x2F;get()&#x2F;remove()，操作的时间复杂度为O（logn),比单向链表的时间复杂度O(n)的好。性能高。</p>
<p>​		什么时候会使用红黑树变为单向链表：当使用红黑树的索引i位置上的元素的个数小于6时，就会将红黑树退化为单向链表。</p>
<h2 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h2><p>LinkedHashMap是HashMap的子类</p>
<p>使用的数组+单向链表+红黑树的基础上，又增加了一对双向链表，记录添加的（key,value)的先后顺序。便于我们遍历所有的key-value。</p>
<p>重写了增加方法。</p>
<h2 id="HashSet和LinkedHashSet源码分析"><a href="#HashSet和LinkedHashSet源码分析" class="headerlink" title="HashSet和LinkedHashSet源码分析"></a>HashSet和LinkedHashSet源码分析</h2><ul>
<li>HashSet底层使用HashMap</li>
<li>LinkedHashSet使用的是LinkedHashMap</li>
</ul>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="链表和数组的区别？"><a href="#链表和数组的区别？" class="headerlink" title="链表和数组的区别？"></a>链表和数组的区别？</h2><h2 id="栈是如何运行的？"><a href="#栈是如何运行的？" class="headerlink" title="栈是如何运行的？"></a>栈是如何运行的？</h2><h2 id="ArraList的默认大小是多少，以及扩容机制"><a href="#ArraList的默认大小是多少，以及扩容机制" class="headerlink" title="ArraList的默认大小是多少，以及扩容机制"></a>ArraList的默认大小是多少，以及扩容机制</h2><h2 id="ArraList的底层是怎么实现的"><a href="#ArraList的底层是怎么实现的" class="headerlink" title="ArraList的底层是怎么实现的"></a>ArraList的底层是怎么实现的</h2><h2 id="数组和ArrayList的区别"><a href="#数组和ArrayList的区别" class="headerlink" title="数组和ArrayList的区别"></a>数组和ArrayList的区别</h2><p>ArrayList看作是对数组的常见操作的封装</p>
<h2 id="什么是线程安全的List"><a href="#什么是线程安全的List" class="headerlink" title="什么是线程安全的List"></a>什么是线程安全的List</h2><h2 id="HashMap初始值16，临界值12是怎么算的"><a href="#HashMap初始值16，临界值12是怎么算的" class="headerlink" title="HashMap初始值16，临界值12是怎么算的"></a>HashMap初始值16，临界值12是怎么算的</h2><h2 id="HashMap长度为什么是2的幂"><a href="#HashMap长度为什么是2的幂" class="headerlink" title="HashMap长度为什么是2的幂"></a>HashMap长度为什么是2的幂</h2><p>为了方便计算要添加的元素的底层的索引i</p>
<h2 id="HashMap怎么计算哈是在和索引？扩容机制？解决Hash冲突"><a href="#HashMap怎么计算哈是在和索引？扩容机制？解决Hash冲突" class="headerlink" title="HashMap怎么计算哈是在和索引？扩容机制？解决Hash冲突"></a>HashMap怎么计算哈是在和索引？扩容机制？解决Hash冲突</h2><h2 id="HashMap底层为什么加链表？"><a href="#HashMap底层为什么加链表？" class="headerlink" title="HashMap底层为什么加链表？"></a>HashMap底层为什么加链表？</h2><p>因为有哈斯冲突。解决方案，使用链表的方式。保证要添加的元素仍然在索引i的位置上</p>
<h2 id="HashMap为什么长度达到一定的长度要转化为红黑树？"><a href="#HashMap为什么长度达到一定的长度要转化为红黑树？" class="headerlink" title="HashMap为什么长度达到一定的长度要转化为红黑树？"></a>HashMap为什么长度达到一定的长度要转化为红黑树？</h2><h2 id="HashMap的get-原理？"><a href="#HashMap的get-原理？" class="headerlink" title="HashMap的get()原理？"></a>HashMap的get()原理？</h2><h2 id="hashCode-与equals-生产算法，方法怎么重写？"><a href="#hashCode-与equals-生产算法，方法怎么重写？" class="headerlink" title="hashCode()与equals()生产算法，方法怎么重写？"></a>hashCode()与equals()生产算法，方法怎么重写？</h2><p>进行equals()判断使用的属性，通常也都会参与到hashCode()的计算中。尽量保证hashCode()的一致性。</p>
<h2 id="equals与-的区别，equals相等hash值一定相等吗？hash值相等equals一定相等吗？"><a href="#equals与-的区别，equals相等hash值一定相等吗？hash值相等equals一定相等吗？" class="headerlink" title="equals与&#x3D;&#x3D;的区别，equals相等hash值一定相等吗？hash值相等equals一定相等吗？"></a>equals与&#x3D;&#x3D;的区别，equals相等hash值一定相等吗？hash值相等equals一定相等吗？</h2>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/09/javaday11_generics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/09/javaday11_generics/" class="post-title-link" itemprop="url">java-Day11——泛型</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-09 22:18:01" itemprop="dateCreated datePublished" datetime="2023-10-09T22:18:01+08:00">2023-10-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="泛型的引入"><a href="#泛型的引入" class="headerlink" title="泛型的引入"></a>泛型的引入</h1><p>所谓泛型，就是允许在定义类、接口时通过一个<strong>标识</strong>来表示类中<strong>某个属性的类型</strong>或者是某个方法的<strong>返回值或参数的类型</strong>。这个类型参数将在使用时（例如，继承或实现这个接口、创建对象或调用方法时）确定（即传入实际的类型参数，也称为类型实参）</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><strong>在集合使用泛型前可能存在的问题</strong></p>
<p>问题1：类型不安全。因为add()的参数是Object类型，意味着任何类型的对象都可以添加成功</p>
<p>问题2：需要使用强转操作，繁琐。还有可能导致ClassCastException异常</p>
<h1 id="泛型的使用"><a href="#泛型的使用" class="headerlink" title="泛型的使用"></a>泛型的使用</h1><p><strong>使用说明</strong></p>
<ul>
<li>集合框架在生命接口和实现类时使用泛型，在实例化集合对象时，如果没有使用泛型，则认为操作的是Object类型的数据。如果使用了泛型，则需要指明泛型的具体类型。一旦指明了泛型的具体类型，则阿紫集合的相关的方法中，凡是使用泛型的位置，都替换为具体的泛型类型。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        list.add(<span class="number">78</span>);</span><br><span class="line">        list.add(<span class="number">254</span>);</span><br><span class="line">        list.add(<span class="number">54</span>);</span><br><span class="line">        list.add(<span class="number">99</span>);</span><br><span class="line">        <span class="comment">//编译报错，保证类型安全</span></span><br><span class="line">        <span class="comment">// list.add(&quot;AA&quot;);</span></span><br><span class="line">        Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="comment">//因为添加的都是Integer类型，避免了强转操作</span></span><br><span class="line">            <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> i;</span><br><span class="line">            System.out.println(score);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//在map中的使用</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();<span class="comment">//类型推断</span></span><br><span class="line">        map.put(<span class="string">&quot;Tom&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        map.put(<span class="string">&quot;jack&quot;</span>,<span class="number">23</span>);</span><br><span class="line">        map.put(<span class="string">&quot;hh&quot;</span>, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;Map.Entry&lt;String, Integer&gt;&gt; entreSet = map.entrySet();</span><br><span class="line">        Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = entreSet.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;String, Integer&gt; entry = iterator.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key+<span class="string">&quot;--&gt;&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="自定义泛型"><a href="#自定义泛型" class="headerlink" title="自定义泛型"></a>自定义泛型</h1><h2 id="自定义泛型类-接口"><a href="#自定义泛型类-接口" class="headerlink" title="自定义泛型类\接口"></a>自定义泛型类\接口</h2><p><strong>格式</strong></p>
<p>class A<T>{</p>
<p>}</p>
<p>interface B&lt;T1,T2&gt;{</p>
<p>}</p>
<p><strong>使用说明：</strong></p>
<ol>
<li>声明完自定义泛型类以后，可以在类的内部（比如属性、方法、构造器中）使用类的泛型</li>
<li>创建自定义泛型类的对象时，可以指明泛型参数类型。一旦指明，内部凡是所使用类的泛型参数的位置，都具体化为指定的类的泛型类型。</li>
<li>创建自定义泛型类的对象时，没有指明泛型参数类型，那么泛型将被擦除，泛型对应的类型均安装Object处理，但不等于Object。经验：泛型要用使用一路都用，要不用，一路都不用。</li>
<li>泛型的指定中必须使用引用数据类型。不能使用基本数据类型，此时只能使用包装类替换。</li>
<li>除创建泛型类对象外，子类继承泛型类时、实现类实现泛型接口时，也可以确定泛型结构中的泛型参数。</li>
</ol>
<p>如果我们在给泛型类提供子类时，子类也不确定泛型的类型，则可以继续使用泛型参数。</p>
<p>我们还可以再现有的父类的泛型参数的基础上，新增泛型参数</p>
<p><strong>注意：</strong></p>
<ol>
<li><p>泛型类可能有多个参数，此时应将多个参数一起放在尖括号内。比如&lt;E1,E2,E3&gt;</p>
</li>
<li><p>JDK7开始，泛型的简化操作：ArrayList<Fruit> flist &#x3D; new ArrayList&lt;&gt;();</p>
</li>
<li><p>如果泛型结构是一个接口或抽象类，则不可以创建泛型类的对象</p>
</li>
<li><p>不能使用new E()。但是可以，E[] elements &#x3D; (E[])new Object[capacity];</p>
</li>
<li><p>在类&#x2F;接口上声明的泛型，在本类或本接口中即代表某种类型，但不可以在静态方法中使用类的泛型。</p>
</li>
<li><p>异常类不可以带泛型。</p>
</li>
</ol>
<h2 id="自定义泛型方法"><a href="#自定义泛型方法" class="headerlink" title="自定义泛型方法"></a>自定义泛型方法</h2><p><strong>格式</strong>：</p>
<p>权限修饰符 <T> 返回值类型 方法名（形参列表）{</p>
<p>}</p>
<p><strong>举例</strong></p>
<p>public <E> E method(E e){</p>
<p>}</p>
<p><strong>说明</strong></p>
<ul>
<li>声明泛型方法时，一定要添加泛型参数<T></li>
<li>泛型参数在方法调用时，指明其具体的类型</li>
<li>泛型方法可以根据需要声明为static</li>
<li>泛型方法所属的类是否是一个泛型类，都可以。</li>
</ul>
<h1 id="泛型在继承上的体现"><a href="#泛型在继承上的体现" class="headerlink" title="泛型在继承上的体现"></a>泛型在继承上的体现</h1><p>1.类SuperA是类A的父类，则G<superA>与G<A>的关系？</p>
<p>二者是并列的两个类，没有任何子父类的关系</p>
<p>2.类SuperA是类A的父类或接口，superA<G>与A<G>的关系？</p>
<p>superA<G>与A<G>有继承或实现的关系。即A<G>的实例可以赋值给SuperA<G>类型的引用或变量。</p>
<h1 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h1><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>ArrayList&lt;?&gt;</p>
<p>G<?> 可以看作是G<A>类型的父类，即可以将G<A>的对象赋值给G<?>类型的引用或变量</p>
<h2 id="读写特点"><a href="#读写特点" class="headerlink" title="读写特点"></a>读写特点</h2><ul>
<li>读取数据：允许的，读取的值为Object类型</li>
<li>写入数据：不允许。特例,null</li>
</ul>
<h2 id="有限制条件的通配符"><a href="#有限制条件的通配符" class="headerlink" title="有限制条件的通配符"></a>有限制条件的通配符</h2><p>List&lt;? extends A&gt;:可以将List<A>或List<B>赋值给List&lt;? extends A&gt;其中B类是A类的子类</p>
<p>List&lt;? super A&gt;：可以将List<A>或List<B>赋值给List&lt;? super A&gt;其中B类是A类的父类</p>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="Java的泛型是什么？有什么好处和优点？JDK不同版本的泛型有什么区别？"><a href="#Java的泛型是什么？有什么好处和优点？JDK不同版本的泛型有什么区别？" class="headerlink" title="Java的泛型是什么？有什么好处和优点？JDK不同版本的泛型有什么区别？"></a>Java的泛型是什么？有什么好处和优点？JDK不同版本的泛型有什么区别？</h2><p>泛型，是程序中出现的不确定的类型。</p>
<p>以集合来举例：把一个集合中的内容限制为一个特定的数据类型，这就是generic背后的核心思想。</p>

      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/08/javaday10_collection_map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/08/javaday10_collection_map/" class="post-title-link" itemprop="url">java-Day10——集合</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-08 21:25:05" itemprop="dateCreated datePublished" datetime="2023-10-08T21:25:05+08:00">2023-10-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h1><h2 id="数组存储的特点"><a href="#数组存储的特点" class="headerlink" title="数组存储的特点"></a>数组存储的特点</h2><ul>
<li><p>数组一旦初始化，长度就确定了</p>
</li>
<li><p>数组中的多个元素是依次紧密排列的，有序的，可重复的。</p>
</li>
<li><p>数组一旦初始化完成，其元素的类型就是确定的。不是此类型的，就不能添加到此数组中</p>
</li>
<li><p>元素的类型可以是基本数据类型，也可以是引用数据类型</p>
</li>
</ul>
<p><strong>反向来看</strong>：</p>
<ul>
<li>一旦初始化，长度就不可变了</li>
<li>数组中存储元素特点的单一性。对于无须、不可重复的场景的多个数据就无能为力了</li>
<li>数组中可用的方法、属性都很少。具体需要都需要自己来组织相关代码逻辑</li>
<li>对于数组中元素的删除、插入操作，性能较差。</li>
</ul>
<h2 id="Java集合框架体系"><a href="#Java集合框架体系" class="headerlink" title="Java集合框架体系"></a>Java集合框架体系</h2><p>1.<strong>java.util.Collection</strong>:存储一个个的数据</p>
<ul>
<li>子接口：<strong>List：</strong>存储有序的、可重复的数据<ul>
<li>**ArrayList(主要)**、LinkedList、Vector</li>
</ul>
</li>
<li>子接口：**Set:**存储无序的、不可重复的接口<ul>
<li>**HashSet(主要)**、LinkedHashSet、TreeSet</li>
</ul>
</li>
</ul>
<p>2**.java.util.Map:**存储一对一对的数据</p>
<ul>
<li>**HashMap(主要)**、LinkedHashmap、TreeMap、Hashtable、Properties</li>
</ul>
<h1 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h1><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a><strong>常用方法</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//add</span></span><br><span class="line">    <span class="type">Collection</span> <span class="variable">coll</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>);<span class="comment">//自动装箱</span></span><br><span class="line">    coll.add(<span class="keyword">new</span> <span class="title class_">Object</span>());</span><br><span class="line">    System.out.println(coll);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//addAll()</span></span><br><span class="line">    <span class="type">Collection</span> <span class="variable">coll1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    coll1.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">    coll1.add(<span class="string">&quot;fff&quot;</span>);</span><br><span class="line">    <span class="comment">//size()</span></span><br><span class="line">    System.out.println(coll.size());</span><br><span class="line">    coll.addAll(coll1);</span><br><span class="line">    System.out.println(coll);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//isEmpty()</span></span><br><span class="line">    System.out.println(coll.isEmpty());</span><br><span class="line">    <span class="comment">//contains(Object obj)</span></span><br><span class="line">    System.out.println(coll.contains(<span class="string">&quot;aaa&quot;</span>));</span><br><span class="line">    <span class="comment">//containsAll(Collection coll)</span></span><br><span class="line">    <span class="type">Collection</span> <span class="variable">coll3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    coll3.add(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line">    coll3.add(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line">    System.out.println(coll.containsAll(coll3));</span><br><span class="line">    <span class="comment">// clear 清空集合元素</span></span><br><span class="line">    <span class="comment">//remove(Object):从集合中删除第一个找到的与obj对象equals返回true的元素</span></span><br><span class="line">    <span class="comment">//removeAll(Collection coll):从当前集合中删除所有与coll集合中相同的元素.即this</span></span><br><span class="line">    <span class="comment">//retainAll)Collection coll):当当前集合中删除两个集合中不同的元素</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//集合 --》数组</span></span><br><span class="line">    Object[] arr = coll.toArray();</span><br><span class="line">    System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组--》集合</span></span><br><span class="line">    String[] arr2 = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;aa&quot;</span>,<span class="string">&quot;bb&quot;</span>&#125;;</span><br><span class="line">    <span class="type">Collection</span> <span class="variable">list</span> <span class="operator">=</span> Arrays.asList(arr2);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>添加元素的要求：</strong></p>
<p>要求元素所属的类一定要重写equals()</p>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Collection</span> <span class="variable">coll</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>);</span><br><span class="line">    coll.add(<span class="keyword">new</span> <span class="title class_">Object</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取迭代器对象</span></span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> coll.iterator();</span><br><span class="line">    <span class="comment">//实现遍历方式1：</span></span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">    <span class="comment">//实现遍历方式2：</span></span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="foreach循环"><a href="#foreach循环" class="headerlink" title="foreach循环"></a>foreach循环</h2><p><strong>格式：</strong></p>
<p>for(要遍历的集合或数组元素的类型 临时变量： 要遍历的集合或数组变量){</p>
<p>​	操作临时变量的输出</p>
<p>}</p>
<p>针对于集合来讲，增强for循环的底层仍然使用的是迭代器</p>
<p>增强for循环的执行过程中，是将集合或数组中的元素一次赋值给临时变量，注意循环体中对临时变量的修改，可能不会导致原有集合或数组中元素的修改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Collection</span> <span class="variable">coll</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>);</span><br><span class="line">    coll.add(<span class="keyword">new</span> <span class="title class_">Object</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Object obj : coll) &#123;</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (Object i : arr) &#123;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="List-Collection"><a href="#List-Collection" class="headerlink" title="List(Collection)"></a>List(Collection)</h1><h2 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h2><p>1.collections中含有的15个方法</p>
<p>2.由于集合是有序的，进而就有与索引相关的一些方法</p>
<p>插入元素：</p>
<ul>
<li><p>void add(int index, Object ele)</p>
</li>
<li><p>boolean addAll(int index, Collection eles)</p>
</li>
</ul>
<p>获取元素</p>
<ul>
<li>Object get(int index):获取指定index位置的元素</li>
<li>List subList(int fromIndex, int toIndex)返回从fromIndex到toIndex的位置的子集合</li>
</ul>
<p>获取元素索引</p>
<ul>
<li>int indexOf(Object obj):返回obj在集合中首次出现的位置</li>
<li>int lastIndexOf(Object obj):返回Obj在当前集合中末次出现的位置</li>
</ul>
<p>删除和替换元素</p>
<ul>
<li>Object remove(int index):移除指定index位置的元素，并返回此元素</li>
<li>Object set(int index, Object ele):设置指定index位置的元素为ele</li>
</ul>
<p>小结：</p>
<p><strong>增</strong>：add(Object obj)   addAll(Collection coll)</p>
<p><strong>删</strong>: remove(Object obj)  remove(int index)</p>
<p><strong>改</strong>:set(int index, Object ele)</p>
<p><strong>查</strong>:get(int index)</p>
<p><strong>插</strong>:add(int index, Object ele)  addAll(int index, Collection eles)</p>
<p><strong>长度</strong>： size()</p>
<p><strong>遍历</strong>：iterator(), foreach, for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    list.add(<span class="string">&quot;AA&quot;</span>);</span><br><span class="line">    list.add(<span class="number">123</span>);</span><br><span class="line">    list.add(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">    System.out.println(list.toString());</span><br><span class="line"></span><br><span class="line">    list.add(<span class="number">2</span>,<span class="string">&quot;Cc&quot;</span>);</span><br><span class="line">    <span class="type">List</span> <span class="variable">list1</span> <span class="operator">=</span> Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// list.add(1,list1); //将list1看作一个整体加入list</span></span><br><span class="line">    list.addAll(<span class="number">1</span>,list1);</span><br><span class="line">    System.out.println(list);</span><br><span class="line"></span><br><span class="line">    list.remove(<span class="number">2</span>);<span class="comment">//删除索引为2的元素</span></span><br><span class="line">    list.remove(Integer.valueOf(<span class="number">2</span>));<span class="comment">//删除数据为2</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="实现类及其特点"><a href="#实现类及其特点" class="headerlink" title="实现类及其特点"></a>实现类及其特点</h2><p>ArrayList: List的主要实现类：线程不安全、效率高；底层使用Object[]数组存储。添加、查询数据时效率高；插入、删除时，效率较低</p>
<p>LinkedList: 底层使用双向链表进行存储。在对集合中的数据频繁进行删除和插入时建议使用此类。插入、删除时，效率高，添加、查询数据时效率低。</p>
<p>Vector：List的古老实现类：线程安全、效率低；底层使用Object存储数据</p>
<h1 id="Set-Collection"><a href="#Set-Collection" class="headerlink" title="Set(Collection)"></a>Set(Collection)</h1><h2 id="无序性、不可重复性的理解"><a href="#无序性、不可重复性的理解" class="headerlink" title="无序性、不可重复性的理解"></a>无序性、不可重复性的理解</h2><p><strong>无序性</strong>： 不是随机性。也不是添加元素的顺序和遍历元素的顺序的不一致。而是与添加元素位置有关，不像ArrayList一样是依次紧密排列的，而是根据添加元素的哈希值，计算的其在数组中存储的位置。此位置不是依次排列的，表现为无序性</p>
<p><strong>不可重复性</strong>：添加到Set中的元素是不能相同的。比较的标准，需要判断hashCode()得到的哈希值与equals（）得到的结果。</p>
<h2 id="常用方法："><a href="#常用方法：" class="headerlink" title="常用方法："></a>常用方法：</h2><p>即为Collection中声明的15个抽象方法。没有新增的方法</p>
<h2 id="开发场景"><a href="#开发场景" class="headerlink" title="开发场景"></a>开发场景</h2><p>较List、Map来说，set使用的频率较少</p>
<h2 id="实现类："><a href="#实现类：" class="headerlink" title="实现类："></a>实现类：</h2><p>**HashSet:**主要实现类；底层使用HashMap,即使用数组+单向链表+红黑树结构进行存储</p>
<p>​		<strong>LinkedHashSet:</strong> 是HashSet的子类。在现有数组+单向链表+红黑结构基础上，又添加了一组双向链表，用于记录添加元素的先后顺序。即：我们可以按照添加元素的顺序实现遍历。便于频繁的查询操作。</p>
<p><strong>TreeSet</strong>:底层使用红黑树存储。可以按照添加的元素的指定的属性的大小顺序进行遍历</p>
<h2 id="添加到HashSet-LinkedHashSet中元素的要求："><a href="#添加到HashSet-LinkedHashSet中元素的要求：" class="headerlink" title="添加到HashSet&#x2F;LinkedHashSet中元素的要求："></a>添加到HashSet&#x2F;LinkedHashSet中元素的要求：</h2><p><strong>要求元素所在的类要重写两个方法：equals()和hashCode().</strong></p>
<p>同时要求equals()和hashCode()要保持一致性</p>
<h2 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h2><p><strong>向TreeSet中添加元素的要求</strong></p>
<p>添加到TreeSet中的元素必须是同一个类型的对象，否则会报ClassCastException.</p>
<p><strong>判断数据是否相同的标准：</strong></p>
<ul>
<li><p>不再是考虑hashCode()和equals()方法了，也就意味着添加到TreeSet中的元素不再需要重新hashcode和equals()</p>
</li>
<li><p>比较元素大小的或比较元素是否相等的标准就是考虑自然排序或定制排序中compareTo()或compare()的返回值。如果compareTo()或compare()的返回值为0，则认为两个对象是相等的。由于TreeSet中不能存放相同的元素，则后一个相等的元素就不能添加到TreeSet中。</p>
</li>
</ul>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><h2 id="实现类及对比"><a href="#实现类及对比" class="headerlink" title="实现类及对比"></a>实现类及对比</h2><ul>
<li>HashMap:主要实现类;线程不安全，效率高；可以添加null的key和value的值;底层使用数组+单向链表+红黑树结构存储<ul>
<li>LinkedHashMap：是HashMap的子类，在HashMap使用的结构基础上，增加了一对双向链表，用于记录添加的元素的先后顺序。遍历的时候可以按照添加的顺序显示。开发中，对于频繁的遍历操作，建议使用此类。</li>
</ul>
</li>
<li>Hashtable：古老实现类;线程安全，效率低；不可以添加null的key和value值;底层使用数组+单向链表结构存储</li>
<li>TreeMap：底层使用红黑树存储；可以安装添加的key-value中key元素的指定的属性的大小顺序进行遍历。需要考虑1.自然排序 2.定制排序<ul>
<li>Properties：其key和value都是String类型。常用来处理属性文件。</li>
</ul>
</li>
</ul>
<h2 id="HashMap中元素的特点"><a href="#HashMap中元素的特点" class="headerlink" title="HashMap中元素的特点"></a>HashMap中元素的特点</h2><ul>
<li>HashMap中的所有的key彼此之间是不可以重复的、无序的。所有的key就构成了一个<strong>Set</strong>集合。 &#x3D;&#x3D;》<strong>key</strong>所在的类要重写<strong>hashCode()<strong>和</strong>equals()</strong></li>
<li>HashMap中的所有的value彼此之间是可重复的、无序的。所有的value就构成一个<strong>Collection</strong>集合。&#x3D;&#x3D;》<strong>value</strong>所在的类要<strong>重写equals()</strong></li>
<li>HashMap中的一个key-value就构成了一个Entry。</li>
<li>HashMap中所有的entry彼此之间是不可重复的、无序的。所有的entry就构成了一个set集合。</li>
</ul>
<h2 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h2><p>添加、修改操作：</p>
<p>​	Object put(Object key, Object value):将指定key-value添加到当前map对象中</p>
<p>​	void putAll(Map m):将m中所有key-value对存放到当前map中</p>
<p>删除</p>
<p>​	Object remove(Object key) 移除指定key的key-value对，并返回value</p>
<p>​	void clear():清空当前map中所有的数据</p>
<p>元素查询</p>
<p>​	Object get(object key)获取指定key对应value</p>
<p>​	boolean containKey(Object key)是否包含指定的key</p>
<p>​	boolean containsValue(Object value):是否包含指定的value</p>
<p>​	int size():返回map中key-value对的个数</p>
<p>​	boolean isEmpty():判断当前map是否为空</p>
<p>​	boolean equals(Object obj):判断当前map和参数对象是否相等</p>
<p>元视图操作的方法</p>
<ul>
<li>Set keySet() 返回所有key构成的Set集合</li>
<li>Collection values():返回所有value构成的Collection集合</li>
<li>Set entrySet():返回所有key-value对构成的Set集合</li>
</ul>
<p><strong>小结：</strong></p>
<p>增：put(Object key, Object value), putAll(Map m)</p>
<p>删：Object remove(Object key)</p>
<p>改：put(Object key, Object value), putAll(Map m)</p>
<p>查：Object get(Object key)</p>
<p>长度：size()</p>
<p>遍历：</p>
<p>​	遍历key集： Set keySet()</p>
<p>​	遍历value集: Collection values()</p>
<p>​	遍历entry集：Set entrySet()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//put(Object key, Object value)</span></span><br><span class="line">        <span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;AA&quot;</span>, <span class="number">56</span>);</span><br><span class="line">        map.put(<span class="number">65</span>,<span class="string">&quot;TOM&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;BB&quot;</span>, <span class="number">78</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//size()</span></span><br><span class="line">        System.out.println(map.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Object remove(Object key)</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> map.remove(<span class="string">&quot;AA&quot;</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改:put</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">oldValue</span> <span class="operator">=</span> map.put(<span class="string">&quot;BB&quot;</span>,<span class="number">99</span>);</span><br><span class="line">        System.out.println(oldValue);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//get</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">value1</span> <span class="operator">=</span> map.get(<span class="string">&quot;BB&quot;</span>);</span><br><span class="line">        System.out.println(value1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历key集</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keySet</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        <span class="comment">//使用迭代器</span></span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> keySet.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">key</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历Value集：</span></span><br><span class="line">        <span class="type">Collection</span> <span class="variable">values</span> <span class="operator">=</span> map.values();</span><br><span class="line">        <span class="comment">//方式1：for-each</span></span><br><span class="line">        <span class="keyword">for</span>(Object obj: values)&#123;</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//方式2：</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keySet1</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        <span class="keyword">for</span>(Object key:keySet1)&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">value2</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(value2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式1：遍历entry集</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">entryset</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator2</span> <span class="operator">=</span> entryset.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="comment">//方法1</span></span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">            <span class="comment">//方法2</span></span><br><span class="line">            Map.<span class="type">Entry</span> <span class="variable">entry</span> <span class="operator">=</span> (Map.Entry) iterator2.next();</span><br><span class="line">            System.out.println(entry.getKey()+<span class="string">&quot;--&gt;&quot;</span>+entry.getValue());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式2：遍历entry集</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keySet2</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Object key:keySet2)&#123;</span><br><span class="line">            System.out.println(key+ <span class="string">&quot;---&gt;&quot;</span>+map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="TreeMap的使用"><a href="#TreeMap的使用" class="headerlink" title="TreeMap的使用"></a>TreeMap的使用</h2><ul>
<li>底层使用红黑树存储</li>
<li>可以按照添加的key-value的key元素指定的属性大小顺序进行遍历</li>
<li>需要考虑1.自然排序 2.定制排序</li>
<li>要求向TreeMap中添加的key必须是同一个类型的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMapTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//自然排序</span></span><br><span class="line">        <span class="type">TreeMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;CC&quot;</span>, <span class="number">89</span>);</span><br><span class="line">        map.put(<span class="string">&quot;BB&quot;</span>,<span class="number">78</span>);</span><br><span class="line">        map.put(<span class="string">&quot;jj&quot;</span>,<span class="keyword">new</span> <span class="title class_">Data</span>());</span><br><span class="line">        map.put(<span class="string">&quot;kk&quot;</span>,<span class="number">78</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">entrySet</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object entry:entrySet)&#123;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">TreeMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeMap</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">u1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jerry&quot;</span>,<span class="number">43</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Rose&quot;</span>,<span class="number">13</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jack&quot;</span>,<span class="number">23</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Tony&quot;</span>, <span class="number">33</span>);</span><br><span class="line"></span><br><span class="line">        map.put(u1,<span class="number">78</span>);</span><br><span class="line">        map.put(u2,<span class="number">76</span>);</span><br><span class="line">        map.put(u3,<span class="number">76</span>);</span><br><span class="line">        map.put(u4,<span class="number">77</span>);</span><br><span class="line">        map.put(u5,<span class="number">45</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">entrySet</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object entry:entrySet)&#123;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//定制排序</span></span><br><span class="line">        <span class="type">Comparator</span> <span class="variable">comparator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Comparator</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> User &amp;&amp; o2 <span class="keyword">instanceof</span> User) &#123;</span><br><span class="line">                    <span class="type">User</span> <span class="variable">u1</span> <span class="operator">=</span> (User) o1;</span><br><span class="line">                    <span class="type">User</span> <span class="variable">u2</span> <span class="operator">=</span> (User) o2;</span><br><span class="line"></span><br><span class="line">                    <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> u1.getName().compareTo(u2.getName());</span><br><span class="line">                    <span class="keyword">if</span> (value != <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> u1.getAge() - u2.getAge();</span><br><span class="line">                &#125;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;类型不匹配&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">TreeMap</span> <span class="variable">map1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeMap</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//定义自然排序的规则</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span> == o)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User) o;</span><br><span class="line">            <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="built_in">this</span>.age - u.age;</span><br><span class="line">            <span class="keyword">if</span>(value !=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> -<span class="built_in">this</span>.name.compareTo(u.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;类型不匹配&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Properties的使用"><a href="#Properties的使用" class="headerlink" title="Properties的使用"></a>Properties的使用</h2><p>Properties是Hashtable的子类，其key和value都是String类型的，常用来处理属性文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//将数据封装到具体的配置文件中，在程序中读取配置文件中的信息，实现了数据和代码的解耦</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;info.properties&quot;</span>);</span><br><span class="line">        System.out.println(file.getAbsolutePath());</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        pros.load(fis);<span class="comment">//记载流中文件中的数据</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//读取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(name+<span class="string">&quot;xx&quot;</span>+pwd);</span><br><span class="line"></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h1><p>Collections是一个操作Set,List和Map等集合的工具类。</p>
<p>**Question:**Collection和Collections</p>
<p>Collection:集合框架中的用于存储一个一个元素的接口，又为List和Set等子接口</p>
<p>Collections：用于操作集合框架的一个工具类。此时集合框架包括:Set、List、Map</p>
<h2 id="常用方法-3"><a href="#常用方法-3" class="headerlink" title="常用方法"></a>常用方法</h2><p><strong>排序操作：</strong></p>
<ul>
<li><p>reverse(list):反转list中的元素</p>
</li>
<li><p>shuffle(list):对list集合元素进行随机排序</p>
</li>
<li><p>sort(list):根据元素的自然顺序对指定List集合元素按升序排序</p>
</li>
<li><p>sort(list.Comparator):根据指定的Comparator产生的顺序对List集合元素进行排序</p>
</li>
<li><p>swap(list.int int):将指定list集合中i处元素和j处元素进行交换</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> Arrays.asList(<span class="number">45</span>,<span class="number">34</span>,<span class="number">64</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">24</span>,<span class="number">5</span>);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">    <span class="comment">// Collections.reverse(list);</span></span><br><span class="line">    Collections.shuffle(list);</span><br><span class="line">    Collections.sort(list);</span><br><span class="line">    Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> Integer &amp;&amp; o2 <span class="keyword">instanceof</span> Integer)&#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">i1</span> <span class="operator">=</span> (Integer) o1;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">i2</span> <span class="operator">=</span> (Integer) o2;</span><br><span class="line">                <span class="keyword">return</span> -(i1- i2);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span>  <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;类型不匹配&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>查找：</strong></p>
<ul>
<li>Object max(Collection)：根据元素自然排序，返回集合中最大的元素</li>
<li>Object max(Collection.Comparator):根据Comparator指定的顺序，返回给定集合中最大元素</li>
<li>Object min(Collection):根据元素的自然顺序，返回给定集合中最小的元素</li>
<li>Object min(Collection Comparator)：根据Comparator指定的顺序，返回给定集合中最小元素</li>
<li>int binarySearch(List list, T key)在List集合中查找某个元素的小标。</li>
<li>int binarySearch(List list, T key，Comparator c)在List集合中查找某个元素的小标，</li>
<li>int frequency(Collection c, Object o):返回指定集合中指定元素出现的次数</li>
</ul>
<p><strong>复制：</strong></p>
<ul>
<li><p>void copy(List des List src):将src中的内容赋值到dest中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">src</span> <span class="operator">=</span> Arrays.asList(<span class="number">45</span>,<span class="number">34</span>,<span class="number">64</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">24</span>,<span class="number">5</span>);</span><br><span class="line"><span class="type">List</span> <span class="variable">dest</span> <span class="operator">=</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">Object</span>[src.size()]);</span><br><span class="line">Collections.copy(dest,src);</span><br></pre></td></tr></table></figure>
</li>
<li><p>boolean replaceAll(List list, Object oldVal, Object newVal):使用新值替换List对象中所有旧值</p>
</li>
<li><p>boolean addAll(Collection c, T..elements)将所有制定元素添加到指定collection中</p>
</li>
<li><p>Collections类中提供了多个synchronizedXXX()方法，该方法可使将指定集合包装成线程同步的集合</p>
</li>
</ul>
<h1 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h1><h2 id="List-Set-Map是否为Collection的接口，三者的区别？"><a href="#List-Set-Map是否为Collection的接口，三者的区别？" class="headerlink" title="List,Set,Map是否为Collection的接口，三者的区别？"></a>List,Set,Map是否为Collection的接口，三者的区别？</h2><h2 id="list-map-set接口的实现类，并说出其特点"><a href="#list-map-set接口的实现类，并说出其特点" class="headerlink" title="list,map,set接口的实现类，并说出其特点"></a>list,map,set接口的实现类，并说出其特点</h2><h2 id="集合的父类是谁？哪些安全的？"><a href="#集合的父类是谁？哪些安全的？" class="headerlink" title="集合的父类是谁？哪些安全的？"></a>集合的父类是谁？哪些安全的？</h2><h2 id="遍历集合的方式有哪些？"><a href="#遍历集合的方式有哪些？" class="headerlink" title="遍历集合的方式有哪些？"></a>遍历集合的方式有哪些？</h2><p>迭代器iterator用来遍历Collection，不能用来遍历Map</p>
<p>增强for</p>
<h2 id="ArrayList与LinkedList区别？"><a href="#ArrayList与LinkedList区别？" class="headerlink" title="ArrayList与LinkedList区别？"></a>ArrayList与LinkedList区别？</h2><h2 id="Set里的元素是不能重复的，那用什么来区分重复与否，用equals（）"><a href="#Set里的元素是不能重复的，那用什么来区分重复与否，用equals（）" class="headerlink" title="Set里的元素是不能重复的，那用什么来区分重复与否，用equals（）"></a>Set里的元素是不能重复的，那用什么来区分重复与否，用equals（）</h2><p>hashCode()、equals（）</p>
<h2 id="TreeSet两种排序方式在使用的时候怎么起作用？"><a href="#TreeSet两种排序方式在使用的时候怎么起作用？" class="headerlink" title="TreeSet两种排序方式在使用的时候怎么起作用？"></a>TreeSet两种排序方式在使用的时候怎么起作用？</h2><p>在添加新的的元素时，需要调用compareTo或compare()</p>
<h2 id="TreeSet的数据结构"><a href="#TreeSet的数据结构" class="headerlink" title="TreeSet的数据结构"></a>TreeSet的数据结构</h2><p>红黑树</p>
<h2 id="final怎么用，修饰Map可以继续添加数据吗？"><a href="#final怎么用，修饰Map可以继续添加数据吗？" class="headerlink" title="final怎么用，修饰Map可以继续添加数据吗？"></a>final怎么用，修饰Map可以继续添加数据吗？</h2><h2 id="Set和Map的比较"><a href="#Set和Map的比较" class="headerlink" title="Set和Map的比较"></a>Set和Map的比较</h2><p>HashSet底层是HashMap</p>
<p>LinkedHashSet底层就是LinkedHashMap</p>
<p>TreeSet底层就是TreeMap</p>
<h2 id="HashMap线程安全吗？"><a href="#HashMap线程安全吗？" class="headerlink" title="HashMap线程安全吗？"></a>HashMap线程安全吗？</h2><p>不安全。</p>
<p>Hashtable是怎么实现爱你的，为什么安全？</p>
<p>数组+单向链表；底层方法使用synchronized修饰</p>
<h2 id="HashMap和TreeMap的区别"><a href="#HashMap和TreeMap的区别" class="headerlink" title="HashMap和TreeMap的区别"></a>HashMap和TreeMap的区别</h2><p>底层数据结果截然不同</p>
<h2 id="HashMap里面实践装的是什么？"><a href="#HashMap里面实践装的是什么？" class="headerlink" title="HashMap里面实践装的是什么？"></a>HashMap里面实践装的是什么？</h2><p>JDK7：HashMap内部声明了Entry,实现了Map中Entry接口(key,value作为Entry两个属性出现)</p>
<p>JDK8：HashMap内部声明了Node,实现了Map中Entry接口(key,value作为Entry两个属性出现)</p>
<h2 id="HashMap的key存储在哪里？"><a href="#HashMap的key存储在哪里？" class="headerlink" title="HashMap的key存储在哪里？"></a>HashMap的key存储在哪里？</h2><p>数组+链表+红黑树</p>
<h2 id="自定义类型可以作为Key吗？"><a href="#自定义类型可以作为Key吗？" class="headerlink" title="自定义类型可以作为Key吗？"></a>自定义类型可以作为Key吗？</h2><p>可以。要重写hashCode()和equals方法</p>

      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/07/javaday9_api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/07/javaday9_api/" class="post-title-link" itemprop="url">java-Day9——api</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-07 22:05:05" itemprop="dateCreated datePublished" datetime="2023-10-07T22:05:05+08:00">2023-10-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h1><h2 id="类的声明"><a href="#类的声明" class="headerlink" title="类的声明"></a>类的声明</h2><ul>
<li><p>final:String是不可以被继承</p>
</li>
<li><p>Serializable:可序列化的接口。凡是实现此接口类的独显就可以通过网络或本地流进行数据的传输</p>
</li>
<li><p>Comparable:凡是实现此接口类，其对象都可以比较大小</p>
</li>
<li></li>
</ul>
<h2 id="内部声明的属性"><a href="#内部声明的属性" class="headerlink" title="内部声明的属性"></a>内部声明的属性</h2><p>jdk8:</p>
<p>private final char value[]:存储字符串数据的容器</p>
<p>​	final:指明此数组一旦初始化，其地址就不可变</p>
<p>jdk9节省内存空间</p>
<p>private final char value[]:存储字符串数据的容器</p>
<h2 id="字符串常量的存储位置"><a href="#字符串常量的存储位置" class="headerlink" title="字符串常量的存储位置"></a>字符串常量的存储位置</h2><ul>
<li><p>字符串常量都存储在字符串常量池（StringTable)中</p>
</li>
<li><p>字符串常量池不允许存放两个相同的字符串常量</p>
</li>
<li><p>字符串常量池，在不同的jdk版本中，存放位置不同</p>
<p>jdk7前：字符串常量池在方法区</p>
<p>jdk7之后：字符串常量池存放在堆空间</p>
</li>
</ul>
<h2 id="String不可变性的理解"><a href="#String不可变性的理解" class="headerlink" title="String不可变性的理解"></a>String不可变性的理解</h2><ol>
<li>当对字符串重新赋值时，需要重新制定一个字符串常量的位置进行赋值，不能在原有的位置修改</li>
<li>当对现有的字符串进行拼接操作时，需要重新开辟空间保存拼接以后的字符串，不能在原有的位置修改</li>
<li>当调用字符串的replace()替换现有的某个字符时，需要重新开辟空间保存修改以后的字符串，不能在原有的位置修改</li>
</ol>
<h2 id="String实例化的两种方式"><a href="#String实例化的两种方式" class="headerlink" title="String实例化的两种方式"></a>String实例化的两种方式</h2><p>String s1 &#x3D; “hello”;</p>
<p>String s2 &#x3D; new String(“hello”);</p>
<p><strong>Question</strong>:</p>
<p>String s2 &#x3D; new String(“hello”)  在内存中创建了几个对象？</p>
<p>两个。一个在堆空间中new的对象。另一个是在字符串常量池中生成的字面量。</p>
<h2 id="String连接操作"><a href="#String连接操作" class="headerlink" title="String连接操作"></a>String连接操作</h2><p>Case1：常量+常量：结果仍存储在字符串常量池中.此时的常量可能是字面量，可能是final修饰的常量。</p>
<p>Case2: 常量+变量 或变量+变量：都会通过new的方式创建一个新的字符串，返回堆空间此字符串对象的地址</p>
<p>Case3:调用字符串的intern():返回的是字符串常量池中字面量的地址</p>
<p>Concat（）：不管常量调用此方法，还是变量调用，同样不管参数是常量还是变量，总之。调用完concat()方法都返回一个新new的对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringDemo</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        p1.name = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line">        p2.name = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;world&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;helloworld&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span> +<span class="string">&quot;world&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> s1 +<span class="string">&quot;world&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span> + s2;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s7</span> <span class="operator">=</span> s1 +s2;</span><br><span class="line"></span><br><span class="line">        System.out.println(s3 == s4); <span class="comment">//true</span></span><br><span class="line">        System.out.println(s3 == s5); <span class="comment">//false</span></span><br><span class="line">        System.out.println(s3 == s6); <span class="comment">//false</span></span><br><span class="line">        System.out.println(s3 == s7); <span class="comment">//false</span></span><br><span class="line">        System.out.println(s5 == s6); <span class="comment">//false</span></span><br><span class="line">        System.out.println(s5 == s7); <span class="comment">//false</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">s8</span> <span class="operator">=</span> s5.intern() <span class="comment">//返回的是字符串常量池中字面量的地址</span></span><br><span class="line">        System.out.println(s3 == s8); <span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s8</span> <span class="operator">=</span> s1.concat(s2);</span><br><span class="line"><span class="type">String</span> <span class="variable">s9</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>.concat(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">s10</span> <span class="operator">=</span> s1.concat(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(s8 == s9); <span class="comment">//false</span></span><br><span class="line">System.out.println(s8 == s10);<span class="comment">//false</span></span><br><span class="line">System.out.println(s9 == s10);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>



<h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><p>public String(), 初始化新创建的String对象，以使其表示空字符序列</p>
<p>public String(String original) 初始化一个新创建的String对象，使其表示一个与参数相同的字符序列</p>
<p>public String(char[] value):通过当前参数中的字符数组来构造新的String</p>
<p>public String(byte[] bytes):通过使用平台的默认字符集解码当前参数中的字节数组来构造新String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * utf8中，一个汉字3字节，一个字母1字节</span></span><br><span class="line"><span class="comment"> * gbk中，一个汉字2字节，一个字母1字节</span></span><br><span class="line"><span class="comment"> * 编码：String --&gt;字节或字节数组</span></span><br><span class="line"><span class="comment"> * 解码： 字节或字节数组 ---&gt; String</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String与char[]之间的转换</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="comment">// String--&gt;char[]:调用String的toCharArray();</span></span><br><span class="line">    <span class="type">char</span>[] arr = str.toCharArray();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        System.out.println(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//char[] --&gt;String:调用String的构造器</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(arr);</span><br><span class="line">    System.out.println(str1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// String与byte[]之间的转换</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="comment">//String --&gt;byte[]:调用String的getBytes()</span></span><br><span class="line">    <span class="type">byte</span>[] arr = str.getBytes();<span class="comment">//使用默认字符集utf-8</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        System.out.println(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//byte[] --&gt; String</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(arr);</span><br><span class="line">    System.out.println(str1);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="String、StringBuffer、StringBuilder"><a href="#String、StringBuffer、StringBuilder" class="headerlink" title="String、StringBuffer、StringBuilder"></a>String、StringBuffer、StringBuilder</h2><ul>
<li>String:不可变字符序列.底层使用Byte[]</li>
<li>StringBuffer:可变字符序列；JDK1.0,线程安全，效率低。底层使用char[]</li>
<li>StringBuilder：可变的字符序列； JDK5.0,线程不安全，效率高,底层使用char[]</li>
</ul>
<p><strong>源码分析：</strong></p>
<p>String s1 &#x3D; new String();&#x2F;&#x2F;Char[] value &#x3D;new char[0];</p>
<p>String s2 &#x3D; new String(“abc”);&#x2F;&#x2F; char[] value &#x3D; new char[]{‘a’,’b’, ‘c’};</p>
<p>StringBuilder</p>
<p>内部属性：</p>
<p>​	char[] value &#x2F;&#x2F;存储字符序列</p>
<p>​	int count; &#x2F;&#x2F;实际存储的字符个数</p>
<p>StringBuilder sBuffer1 &#x3D; new StringBuilder(); &#x2F;&#x2F;char[] value &#x3D; new char[16];</p>
<p>StringBuilder sBuffer1 &#x3D; new StringBuilder(“abc”);&#x2F;&#x2F;char[] value &#x3D; new char[16+”abc”.length];</p>
<p>sBuffer1.append(‘ac’)</p>
<p>…不断的添加，一旦count要超过value.length时，就需要扩容：默认扩容为原有容量的2倍+2；并将原有Value数组中的元素复制到新的数组中。</p>
<p><strong>启示</strong></p>
<ul>
<li><p>如果开发中需要频繁的针对于字符串的增删改，建议使用StringBuffer或StringBuilder替换String因为使用String效率低</p>
</li>
<li><p>如果不涉及线程安全，则使用StringBuilder</p>
</li>
<li><p>如果大体确定操作的字符个数，建议使用带int capacity参数的构造器避免底层多次扩容。</p>
</li>
</ul>
<p><strong>常用方法</strong></p>
<p>增：</p>
<p>append</p>
<p>删：</p>
<p>delete(inrt start, int end)</p>
<p>deleteCharAt(int index)</p>
<p>改:</p>
<p>replace(int start, int end, String str)</p>
<p>setCharAt(int index, char c)</p>
<p>查:</p>
<p>charAt(int index)</p>
<p>插:</p>
<p>insert(int index,xx)</p>
<p>长度:</p>
<p>length()</p>
<p><strong>三者效率对比：</strong></p>
<p>Stringbuilder&gt; StringBuffer&gt;String</p>
<h1 id="Date类"><a href="#Date类" class="headerlink" title="Date类"></a>Date类</h1><h2 id="Jdk8之前："><a href="#Jdk8之前：" class="headerlink" title="Jdk8之前："></a>Jdk8之前：</h2><h2 id="System类的currentTimesMillis"><a href="#System类的currentTimesMillis" class="headerlink" title="System类的currentTimesMillis()"></a>System类的currentTimesMillis()</h2><ul>
<li><p>获取当前时间对应的毫秒数，long类型，时间戳</p>
</li>
<li><p>当前时间与1970年1月1日0时0分0秒之间的毫秒数</p>
</li>
<li><p>常用来计算时间差</p>
</li>
</ul>
<h2 id="SimpleDateFormat"><a href="#SimpleDateFormat" class="headerlink" title="SimpleDateFormat"></a>SimpleDateFormat</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="comment">//格式化：日期--》字符串</span></span><br><span class="line">    <span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">strDate</span> <span class="operator">=</span> sdf.format(date1);</span><br><span class="line">    System.out.println(strDate); <span class="comment">//2023-10-09 23:12:19</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//解析:字符串--》日期</span></span><br><span class="line">    <span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> sdf.parse(<span class="string">&quot;2023-10-09 23:12:11&quot;</span>); </span><br><span class="line">    System.out.println(date2);<span class="comment">//Mon Oct 09 23:12:11 CEST 2023</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Jdk8之后："><a href="#Jdk8之后：" class="headerlink" title="Jdk8之后："></a>Jdk8之后：</h2><h2 id="LocalDate-LocalTime-LocalDateTime"><a href="#LocalDate-LocalTime-LocalDateTime" class="headerlink" title="LocalDate\LocalTime\LocalDateTime"></a>LocalDate\LocalTime\LocalDateTime</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//获取当前时间</span></span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">localdate</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">        <span class="type">LocalTime</span> <span class="variable">localTime</span> <span class="operator">=</span> LocalTime.now();</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">localDateTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        System.out.println(localdate); <span class="comment">//2023-10-09</span></span><br><span class="line">        System.out.println(localTime); <span class="comment">//23:45:05.662967400</span></span><br><span class="line">        System.out.println(localDateTime); <span class="comment">//2023-10-09T23:45:05.662967400</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//of():获取指定时间</span></span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">localDate1</span> <span class="operator">=</span> LocalDate.of(<span class="number">2021</span>, <span class="number">5</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">localDateTime1</span> <span class="operator">=</span> LocalDateTime.of(<span class="number">2022</span>,<span class="number">12</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="number">34</span>,<span class="number">45</span>);</span><br><span class="line">        System.out.println(localDate1);</span><br><span class="line">        System.out.println(localDateTime1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常用方法：</p>
<p>getxxxx()&#x2F;withxxx()&#x2F;plusxxx()&#x2F;minusXXX()</p>
<h2 id="Instant-类似于Date"><a href="#Instant-类似于Date" class="headerlink" title="Instant 类似于Date"></a>Instant 类似于Date</h2><p>时间线上的一个瞬时点。可能被用来记录应用程序中的事件时间戳</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Instant</span> <span class="variable">instant</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">    System.out.println(instant); <span class="comment">//当前时间</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">milliTime</span> <span class="operator">=</span> instant.toEpochMilli();</span><br><span class="line">    System.out.println(milliTime);<span class="comment">//当前时间至1970年的毫秒数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="DateTimeFormatter"><a href="#DateTimeFormatter" class="headerlink" title="DateTimeFormatter"></a>DateTimeFormatter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//自定义格式</span></span><br><span class="line">    <span class="type">DateTimeFormatter</span> <span class="variable">dateTimeFormatter</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//格式化：时间、日期-》字符串</span></span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">localDateTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">    <span class="type">String</span> <span class="variable">strDateTime</span> <span class="operator">=</span> dateTimeFormatter.format(localDateTime);</span><br><span class="line">    System.out.println(strDateTime); <span class="comment">//2023/10/10 12:08:02</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//解析：字符串 -》日期、时间</span></span><br><span class="line">    <span class="type">TemporalAccessor</span> <span class="variable">temporalAccessor</span> <span class="operator">=</span> dateTimeFormatter.parse(<span class="string">&quot;2023/11/25 15:29:23&quot;</span>);</span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">localDateTime1</span> <span class="operator">=</span> LocalDateTime.from(temporalAccessor);</span><br><span class="line">    System.out.println(localDateTime1);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h1><p>两种方法：自然排序、定制排序</p>
<h2 id="实现comparable接口-自然排序"><a href="#实现comparable接口-自然排序" class="headerlink" title="实现comparable接口-自然排序"></a>实现comparable接口-自然排序</h2><p>实现步骤：</p>
<ol>
<li>具体的类A实现Comparable接口</li>
<li>重写Comparable接口中的compareTo(Object obj)方法，在此方法中指明比较类A的对象的大小的标准</li>
<li>创建类A多个实例，进行大小的比较和排序</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        Product[] arr = <span class="keyword">new</span> <span class="title class_">Product</span>[<span class="number">6</span>];</span><br><span class="line">        arr[<span class="number">0</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;aaa&quot;</span>,<span class="number">5555</span>);</span><br><span class="line">        arr[<span class="number">1</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;bbb&quot;</span>,<span class="number">1111</span>);</span><br><span class="line">        arr[<span class="number">2</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;ccc&quot;</span>,<span class="number">3333</span>);</span><br><span class="line">        arr[<span class="number">3</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;ddd&quot;</span>,<span class="number">8888</span>);</span><br><span class="line">        arr[<span class="number">4</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;eee&quot;</span>,<span class="number">1111</span>);</span><br><span class="line">        arr[<span class="number">5</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;fff&quot;</span>,<span class="number">2222</span>);</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>; i&lt;arr.length;i++)&#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> <span class="keyword">implements</span> <span class="title class_">java</span>.lang.Comparable &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Product</span><span class="params">(String name, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Product&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *当前的类需要实现Comparable中的抽象方法</span></span><br><span class="line"><span class="comment">    * 在此方法中，指明如何判断当前类的大小。</span></span><br><span class="line"><span class="comment">    *如果返回值是正，则当前对象大</span></span><br><span class="line"><span class="comment">    * 如果为0，则一样大</span></span><br><span class="line"><span class="comment">    *比较标准：价格（大到小），名字排序从小到大</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(o == <span class="built_in">this</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> Product)&#123;</span><br><span class="line">            <span class="type">Product</span> <span class="variable">p</span> <span class="operator">=</span> (Product) o;</span><br><span class="line">            <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> Double.compare(<span class="built_in">this</span>.price, p.price);</span><br><span class="line">            <span class="keyword">if</span>(value != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> -value;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>  <span class="built_in">this</span>.name.compareTo(p.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;类型不匹配&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Comparator-定制排序"><a href="#Comparator-定制排序" class="headerlink" title="Comparator-定制排序"></a>Comparator-定制排序</h2><p>实现步骤：</p>
<ol>
<li>创建一个实习了Comparator接口的实现类</li>
<li>实现类要求重写Comparator接口中的抽象方法compare(Object o1, Object o2)在此方法中指明要比较大小对象的大小关系（比如，String类、Product类）</li>
<li>创建此实现类A的对象，并将此对象传入到相关方法的参数位置即可（比如说:Arrays.sort(…,类A的实例)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComparatorTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        Product[] arr = <span class="keyword">new</span> <span class="title class_">Product</span>[<span class="number">6</span>];</span><br><span class="line">        arr[<span class="number">0</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;aaa&quot;</span>,<span class="number">5555</span>);</span><br><span class="line">        arr[<span class="number">1</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;bbb&quot;</span>,<span class="number">1111</span>);</span><br><span class="line">        arr[<span class="number">2</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;ccc&quot;</span>,<span class="number">3333</span>);</span><br><span class="line">        arr[<span class="number">3</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;ddd&quot;</span>,<span class="number">8888</span>);</span><br><span class="line">        arr[<span class="number">4</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;eee&quot;</span>,<span class="number">1111</span>);</span><br><span class="line">        arr[<span class="number">5</span>] =<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;fff&quot;</span>,<span class="number">2222</span>);</span><br><span class="line">        <span class="comment">//创建一个实现Comparator接口的实现类的对象</span></span><br><span class="line">        <span class="type">Comparator</span> <span class="variable">comparator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Comparator</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> Product &amp;&amp; o2 <span class="keyword">instanceof</span> Product)&#123;</span><br><span class="line">                    <span class="type">Product</span> <span class="variable">p1</span> <span class="operator">=</span> (Product) o1;</span><br><span class="line">                    <span class="type">Product</span> <span class="variable">p2</span> <span class="operator">=</span> (Product) o2;</span><br><span class="line">                    <span class="keyword">return</span> Double.compare(p1.getPrice(), p2.getPrice());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;类型不匹配&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Arrays.sort(arr,comparator);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="对比两种方法："><a href="#对比两种方法：" class="headerlink" title="对比两种方法："></a>对比两种方法：</h2><p>角度1：</p>
<ul>
<li>自然排序：单一的，唯一的</li>
<li>定制排序：灵活的，多样的</li>
</ul>
<p>角度2：</p>
<ul>
<li>自然排序：一劳永逸</li>
<li>定制排序：临时的</li>
</ul>
<p>角度3：</p>
<ul>
<li>自然排序：对应接口是Comparable，对应的抽象方法compareTo(Object obj)</li>
<li>定制排序：对应接口是Comparator，对应的抽象方法compare(Object obj1, Object obj2)</li>
</ul>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><h2 id="System类"><a href="#System类" class="headerlink" title="System类"></a>System类</h2><h2 id="Runtime类"><a href="#Runtime类" class="headerlink" title="Runtime类"></a>Runtime类</h2><p>对应着java进程的内存使用的运行时环境，是单例</p>
<h2 id="Math类"><a href="#Math类" class="headerlink" title="Math类"></a>Math类</h2><p>凡是与数学运算相关的操作</p>
<h2 id="BigInteger"><a href="#BigInteger" class="headerlink" title="BigInteger"></a>BigInteger</h2><p>商业计算值，要求数字精度比较高</p>
<h2 id="Random类"><a href="#Random类" class="headerlink" title="Random类"></a>Random类</h2><h1 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h1><h2 id="两种创建String对象的方式有什么不同？"><a href="#两种创建String对象的方式有什么不同？" class="headerlink" title="两种创建String对象的方式有什么不同？"></a>两种创建String对象的方式有什么不同？</h2><h2 id="String的-怎么实现？"><a href="#String的-怎么实现？" class="headerlink" title="String的+怎么实现？"></a>String的+怎么实现？</h2><p>常量+常量：略</p>
<p>变量+常量、变量+变量：创建一个StringBuilder的实例，通过append()添加字符串，最后调用toString()返回一个字符串。</p>
<h2 id="Java中String是不是final？"><a href="#Java中String是不是final？" class="headerlink" title="Java中String是不是final？"></a>Java中String是不是final？</h2><h2 id="String为什么不可变，在内存中具体形态"><a href="#String为什么不可变，在内存中具体形态" class="headerlink" title="String为什么不可变，在内存中具体形态"></a>String为什么不可变，在内存中具体形态</h2><p>规定不可变</p>
<p>String：提供字符串常量池</p>
<h2 id="String可以在switch中使用"><a href="#String可以在switch中使用" class="headerlink" title="String可以在switch中使用"></a>String可以在switch中使用</h2><p>可以.从Jdk7开始使用</p>
<h2 id="String中有哪些方法？"><a href="#String中有哪些方法？" class="headerlink" title="String中有哪些方法？"></a>String中有哪些方法？</h2><h2 id="subString-底层做了什么？"><a href="#subString-底层做了什么？" class="headerlink" title="subString()底层做了什么？"></a>subString()底层做了什么？</h2><p>底层是new的方式返回一个subStr</p>
<h2 id="操作字符串的类有哪些？有什么区别？"><a href="#操作字符串的类有哪些？有什么区别？" class="headerlink" title="操作字符串的类有哪些？有什么区别？"></a>操作字符串的类有哪些？有什么区别？</h2><h2 id="String线程安全问题"><a href="#String线程安全问题" class="headerlink" title="String线程安全问题"></a>String线程安全问题</h2><p>线程不安全的</p>
<h2 id="StringBuilder和StringBuffer的线程安全"><a href="#StringBuilder和StringBuffer的线程安全" class="headerlink" title="StringBuilder和StringBuffer的线程安全"></a>StringBuilder和StringBuffer的线程安全</h2><h2 id="Comparable和Comparator的区别和使用场景"><a href="#Comparable和Comparator的区别和使用场景" class="headerlink" title="Comparable和Comparator的区别和使用场景"></a>Comparable和Comparator的区别和使用场景</h2>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aluggnb.com/2023/10/06/javaday8_thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Alugg">
      <meta itemprop="description" content="Step out of your comfort zone">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alugg's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/06/javaday8_thread/" class="post-title-link" itemprop="url">java-Day8——线程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-06 23:05:05" itemprop="dateCreated datePublished" datetime="2023-10-06T23:05:05+08:00">2023-10-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>15k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>14 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><p>java.lang.Thread类代表线程，所有线程对象都必须是Thread类或其子类的对象</p>
<h1 id="线程创建并启动步骤"><a href="#线程创建并启动步骤" class="headerlink" title="线程创建并启动步骤"></a>线程创建并启动步骤</h1><h2 id="方式一：继承Thread类"><a href="#方式一：继承Thread类" class="headerlink" title="方式一：继承Thread类"></a>方式一：继承Thread类</h2><ol>
<li><p>创建一个继承于Thread类的子类</p>
</li>
<li><p>重写Thread类的run() —&gt;将此线程要执行的操作，声明在此方法体中</p>
</li>
<li><p>创建当前Thread的子类的对象</p>
</li>
<li><p>通过对象调用start()：1.启动线程 2.调用当前线程的run()</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EvenNumberTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建当前Thread的子类的对象</span></span><br><span class="line">        <span class="type">PrintNumber</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintNumber</span>();</span><br><span class="line">        <span class="comment">//调用对象启动start</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//再创建一个线程</span></span><br><span class="line">        <span class="type">PrintNumber</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintNumber</span>();</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="comment">//main()所在线程执行操作</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span>; i&lt;=<span class="number">10000</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> ==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i+<span class="string">&quot;****&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个继承于Thread的子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintNumber</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="comment">//重写Thread类的run（）</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span>;i&lt;=<span class="number">1000</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span> ==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="方法二：实现Runnable接口"><a href="#方法二：实现Runnable接口" class="headerlink" title="方法二：实现Runnable接口"></a>方法二：实现Runnable接口</h2><ol>
<li>创建一个实现Runnable接口的类</li>
<li>实现接口的run() –&gt;将此线程要执行的操作，声明在此方法体中</li>
<li>创建当前实现类的对象</li>
<li>将此对象作为参数传递到Thread类的构造器中，创建Thread类的实例</li>
<li>Thread类的实例调用start()</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EvenNumberTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建当前实现类的对象</span></span><br><span class="line">        <span class="type">EvenNumberPrint</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EvenNumberPrint</span>();</span><br><span class="line">        <span class="comment">//将此对象作为参数传递到Thread类的构造器中，创建Thread类的实例</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(p);</span><br><span class="line">        <span class="comment">//Thread类的实例调用start()</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//再创建一个线程</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(p);</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//main方法对应的主线程</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个实现Runnable接口的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EvenNumberPrint</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//实现接口的run() --&gt;将此线程要执行的操作，声明在此方法体中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="两种方式对比"><a href="#两种方式对比" class="headerlink" title="两种方式对比"></a>两种方式对比</h2><p><strong>共同点</strong>：</p>
<p>​	1.创建线程的对象，都是Thread类或其子类的实例</p>
<p>​	2.启动线程都使用的是Thread类中的start()</p>
<p><strong>不同点</strong>：</p>
<p>​	一个是类的继承，一个是接口的实现</p>
<p>建议使用实现Runnable接口的方式。</p>
<p>Runnable好处：1.避免单继承的局限性 2.更适合处理有贡献数据的问题 3.实现代码与数据的分离</p>
<p>二者联系：public class Thread implements Runnable</p>
<h1 id="线程常用结构"><a href="#线程常用结构" class="headerlink" title="线程常用结构"></a>线程常用结构</h1><h2 id="线程的构造器"><a href="#线程的构造器" class="headerlink" title="线程的构造器"></a>线程的构造器</h2><ul>
<li><p>public Thread(): 分配一个新的线程对象</p>
</li>
<li><p>public Thread(String name):分配一个指定名字的新的线程对象</p>
</li>
<li><p>public Thread(Runnable target):指定创建线程的目标对象，它实现了Runnable接口中的run方法</p>
</li>
<li><p>public Thread（Runnable target, String name):分配一个带有指定目标新的线程对象并指定名字</p>
</li>
</ul>
<h2 id="线程中常用方法"><a href="#线程中常用方法" class="headerlink" title="线程中常用方法"></a>线程中常用方法</h2><ul>
<li>start():1.启动线程 2.调用线程的run()</li>
<li>run():将线程要执行的操作，声明在run()中</li>
<li>currentThread():获取当前执行代码对应的线程</li>
<li>getName():获取线程名</li>
<li>setName():设置线程名</li>
<li>sleep(long millis):静态方法，调用时，可以使得代码所在当前线程睡眠指定的毫秒数</li>
<li>yield():静态方法,一旦执行此方法，就释放cpu的执行权</li>
<li>join(): 在线程a中通过线程b调用join(),意味着线程a进入阻塞状态，直到线程b执行结束，线程a才结束阻塞状态，继续执行</li>
<li>isAlive():判断当前线程是否存活</li>
</ul>
<h2 id="线程优先级"><a href="#线程优先级" class="headerlink" title="线程优先级"></a>线程优先级</h2><p>（java是抢占式调度）</p>
<p>Thread类的三个优先级常量</p>
<p>MAX_PRIORITY(10):最高优先级</p>
<p>MIN_PRIORITY(1):最低优先级</p>
<p>NORM_PRIORITY(5):普通优先级，默认情况main线程具有普通优先级</p>
<p>getPriority():获取线程的优先级</p>
<p>setPriority():设置线程的优先级，范围[1,10],大数值就有大概率</p>
<h1 id="线程生命周期"><a href="#线程生命周期" class="headerlink" title="线程生命周期"></a>线程生命周期</h1><h2 id="JDK1-5之前：5种状态"><a href="#JDK1-5之前：5种状态" class="headerlink" title="JDK1.5之前：5种状态"></a>JDK1.5之前：5种状态</h2><p><img src="https://i.imgs.ovh/2023/10/06/LmeC3.png" alt="LmeC3.png"></p>
<h2 id="JDK5-0之后：6种状态"><a href="#JDK5-0之后：6种状态" class="headerlink" title="JDK5.0之后：6种状态"></a>JDK5.0之后：6种状态</h2><p><a target="_blank" rel="noopener" href="https://imgloc.com/image/Lmgm9"><img src="https://i.imgs.ovh/2023/10/06/Lmgm9.png" alt="Lmgm9.png"></a></p>
<h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1><h1 id="线程安全机制"><a href="#线程安全机制" class="headerlink" title="线程安全机制"></a>线程安全机制</h1><p>当多个线程访问同一资源（同一个变量、同一个文件、同一条记录）的时候，若多个线程<strong>只有读操作</strong>，那么不会发生线程安全问题。但是如果多个线程对资源有<strong>读和写</strong>操作，就容易出现线程安全问题。</p>
<h2 id="方法一：同步代码块"><a href="#方法一：同步代码块" class="headerlink" title="方法一：同步代码块"></a>方法一：同步代码块</h2><p>synchronized(同步监视器){</p>
<p>​	&#x2F;&#x2F;需要被同步的代码</p>
<p>}</p>
<p>说明：</p>
<ul>
<li>需要被同步的代码，即为操作共享数据的代码</li>
<li>共享数据，即多个线程都需要操作的数据</li>
<li>需要被同步的代码，在被synchronized包裹以后，就是的一个线程在操作这些代码过程中。其他线程必须等待。</li>
<li>同步监视器，俗称锁。哪个线程获取了锁，哪个线程就能执行需要被同步的代码</li>
<li>同步监视器，可以使用任何一个类的对象。但是，多个线程必须公用同一个同步监视器。</li>
</ul>
<p>注意：在实现Runnable接口的方式中，同步监视器可以考虑使用:this</p>
<p>​		在继承Thread类的方式中，同步监视器要慎用this,可以考虑使用当前类.class</p>
<p><strong>继承Thread类中的应用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WindowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口1&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口2&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口3&quot;</span>);</span><br><span class="line">        w1.start();</span><br><span class="line">        w2.start();</span><br><span class="line">        w3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SaleTicket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (SaleTicket.class) &#123;<span class="comment">//this：此时表示w1,w2,w3不饿能保证唯一性</span></span><br><span class="line">                                <span class="comment">//obj:加上static，可以保证唯一性</span></span><br><span class="line">                <span class="keyword">if</span> (ticket &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">5</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;售票，票号为&quot;</span> + ticket);</span><br><span class="line">                    ticket--;</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SaleTicket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实现Runnable接口的应用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WindowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;窗口1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;窗口2&quot;</span>);</span><br><span class="line">        t3.setName(<span class="string">&quot;窗口3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SaleTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ticket &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">5</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;售票，票号为&quot;</span> + ticket);</span><br><span class="line">                    ticket--;</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="-2"><a href="#-2" class="headerlink" title=""></a></h2><h2 id="方式二：同步方法"><a href="#方式二：同步方法" class="headerlink" title="方式二：同步方法"></a>方式二：同步方法</h2><p>说明：</p>
<ul>
<li><p>如果操作共享数据的代码完整声明在了一个方法中，那么我就可以将此方法声明为同步方法即可。</p>
</li>
<li><p>非静态的同步方法，默认同步监视器是this</p>
</li>
<li><p>静态同步方法，默认监视器是当前类本身。</p>
</li>
</ul>
<p><strong>继承Thread类中的应用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WindowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口1&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口2&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口3&quot;</span>);</span><br><span class="line">        w1.start();</span><br><span class="line">        w2.start();</span><br><span class="line">        w3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SaleTicket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isFlag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(isFlag)&#123;</span><br><span class="line">          show();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123; </span><br><span class="line">            <span class="keyword">if</span> (ticket &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">5</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;售票，票号为&quot;</span> + ticket);</span><br><span class="line">                ticket--;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                isFlag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SaleTicket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>实现Runnable接口的应用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WindowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;窗口1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;窗口2&quot;</span>);</span><br><span class="line">        t3.setName(<span class="string">&quot;窗口3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SaleTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isFlag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(isFlag)&#123;</span><br><span class="line">            show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123; <span class="comment">//此时的同步监视器是:this，此问题中还是唯一的</span></span><br><span class="line">        <span class="keyword">if</span> (ticket &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">5</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;售票，票号为&quot;</span> + ticket);</span><br><span class="line">            ticket--;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            isFlag=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="synchronized优缺点"><a href="#synchronized优缺点" class="headerlink" title="synchronized优缺点"></a>synchronized优缺点</h2><p>好处:解决了线程问题</p>
<p>弊端：在操作共享数据时，多线程其实是串行执行的，意味着性能低。</p>
<h2 id="单例模式-懒汉式（线程安全解决版）"><a href="#单例模式-懒汉式（线程安全解决版）" class="headerlink" title="单例模式-懒汉式（线程安全解决版）"></a>单例模式-懒汉式（线程安全解决版）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BankTest</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Bank</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Bank</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                b1 = Bank.getInstance();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                b2 = Bank.getInstance();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t1.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t2.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(b1);</span><br><span class="line">        System.out.println(b2);</span><br><span class="line">        System.out.println(b1==b2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">Bank</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Bank <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                instance = <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第二种方式（效率更高）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance ==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Bank.class)&#123;</span><br><span class="line">                <span class="keyword">if</span>(instance==<span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span>&#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h1 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h1><p>除了使用synchronized同步机制处理线程安全问题之外，还可以使用jdk5.0提供的锁方式</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li>创建Lock的实例，需要确保多个线程公用同一个Lock实例！需要考虑将此对象声明为static final</li>
<li>执行lock()方法，锁定对共享资源的调用</li>
<li>Unlock()的调用，释放对共享资源的锁定</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WindowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口1&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口2&quot;</span>);</span><br><span class="line">        <span class="type">SaleTicket</span> <span class="variable">w3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaleTicket</span>(<span class="string">&quot;窗口3&quot;</span>);</span><br><span class="line">        w1.start();</span><br><span class="line">        w2.start();</span><br><span class="line">        w3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SaleTicket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isFlag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//1.创建Lock的实例，需要确保多个线程公用一个Lock实例,需要考虑将此对象声明为static finally</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(isFlag)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//2. 执行lock方法，锁定对共享资源的调用</span></span><br><span class="line">                lock.lock();</span><br><span class="line">                show();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (ticket &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;售票，票号为&quot;</span> + ticket);</span><br><span class="line">                ticket--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                isFlag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SaleTicket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Lock与synchronized的区别"><a href="#Lock与synchronized的区别" class="headerlink" title="Lock与synchronized的区别"></a>Lock与synchronized的区别</h2><p>synchronized不管是同步代码块还是同步方法，都需要在结束一对{}，释放对同步监视器的调用。</p>
<p>Lock是通过两个方法控制需要被同步的代码，更灵活一些。</p>
<p>Lock作为接口，提供了多种实现类，适合更多更复杂，效率更高。</p>
<h1 id="通信"><a href="#通信" class="headerlink" title="通信"></a>通信</h1><h2 id="线程间通信的理解"><a href="#线程间通信的理解" class="headerlink" title="线程间通信的理解"></a>线程间通信的理解</h2><p>当我们’需要多个线程’来共同完成一件任务，并且我们希望他们有规律的执行，那么多线程之间需要一些通信可以协调它们的工作，以此实现多线程共同操作一份数据。</p>
<h2 id="涉及到三个方法的使用"><a href="#涉及到三个方法的使用" class="headerlink" title="涉及到三个方法的使用"></a>涉及到三个方法的使用</h2><p>wait():线程一旦执行此方法，就进入等待状态，同时会释放对同步监视器的调用。</p>
<p>notify():一旦执行此方法，就会唤醒被wait()的线程中优先级最高的那一个线程。（如果被wait()的多个线程优先级相同就随机唤醒一个）。被唤醒的线程从当初被wait的位置继续执行。</p>
<p>notifyAll():一旦执行此方法，就会唤醒所有被wait的线程。</p>
<p><strong>注意</strong>：</p>
<ul>
<li>此三个方法的使用，必须是在同步代码块或同步方法中。</li>
<li>此三个方法的调用者，必须是同步监视器。否则会报IllegalMontiorStateException异常</li>
<li>此三个方法声明在Object类中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintNumberTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PrintNumber</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintNumber</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(p,<span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(p,<span class="string">&quot;线程2&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintNumber</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">                notify();</span><br><span class="line">                <span class="keyword">if</span>(number&lt;=<span class="number">100</span>)&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+number);</span><br><span class="line">                    number++;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        wait(); <span class="comment">//线程一旦执行此方法，就进入等待状态。同事，会释放对同步监视器的调用。</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="wait-和sleep-的区别"><a href="#wait-和sleep-的区别" class="headerlink" title="wait()和sleep()的区别"></a>wait()和sleep()的区别</h2><p><strong>相同点</strong>：一旦执行，当前线程都会进入阻塞状态</p>
<p><strong>不同点</strong>：</p>
<p><strong>声明位置不同</strong>：wait():声明在Object类中</p>
<p>​			sleep()声明在Thread类中，静态的</p>
<p><strong>使用场景不同</strong>：wait():只能使用在同步代码块或同步方法中</p>
<p>​					sleep():可以在任何需要使用的场景</p>
<p><strong>使用在同步代码块中</strong>：wait()一旦执行会释放同步监视器</p>
<p>​									sleep()一旦执行，不会释放</p>
<p><strong>结束阻塞的方式：</strong>wait()到达指定时间自动结束阻塞或通过被notify唤醒，结束阻塞</p>
<p>sleep():到达指定时间自动结束阻塞。</p>
<h2 id="消费者与生产者练习"><a href="#消费者与生产者练习" class="headerlink" title="消费者与生产者练习"></a>消费者与生产者练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProducerConsumerTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Clerk</span> <span class="variable">clerk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Clerk</span>();</span><br><span class="line">        <span class="type">Producer</span> <span class="variable">pro1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Producer</span>(clerk);</span><br><span class="line">        <span class="type">Consumer</span> <span class="variable">con1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Consumer</span>(clerk);</span><br><span class="line">        pro1.setName(<span class="string">&quot;生产者1&quot;</span>);</span><br><span class="line">        con1.setName(<span class="string">&quot;消费者&quot;</span>);</span><br><span class="line">        pro1.start();</span><br><span class="line">        con1.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clerk</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">ProductNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增加产品数量方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">addProduct</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ProductNum &gt;= <span class="number">20</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ProductNum++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;生产了第&quot;</span>+ProductNum+<span class="string">&quot;个产品&quot;</span>);</span><br><span class="line">        notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//减少产品数量方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">minusProduct</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ProductNum&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            ProductNum--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;消费了第&quot;</span>+ProductNum+<span class="string">&quot;个产品&quot;</span>);</span><br><span class="line">            notify();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Clerk clerk;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Producer</span><span class="params">(Clerk clerk)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.clerk = clerk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;生产者生产产品&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                Thread.sleep(<span class="number">20</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            clerk.addProduct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Clerk clerk;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">(Clerk clerk)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.clerk = clerk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;生产者生产产品&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            clerk.minusProduct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="线程创建方式三-Callable"><a href="#线程创建方式三-Callable" class="headerlink" title="线程创建方式三-Callable()"></a>线程创建方式三-Callable()</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建一个实现Callable的实现类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumThread</span> <span class="keyword">implements</span> <span class="title class_">Callable</span> &#123;</span><br><span class="line">    <span class="comment">//2.实现call方法，将此线程需要执行的操作声明在call()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">100</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span> ==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">                sum += i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallableTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//3.创建Callable接口实现类的对象</span></span><br><span class="line">        <span class="type">NumThread</span> <span class="variable">numThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NumThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.将此Callable接口实现类的对象作为传递到FutureTask构造器中，创建FutureTask的对象</span></span><br><span class="line">        <span class="type">FutureTask</span> <span class="variable">futureTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FutureTask</span>(numThread);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.将FutureTask的对象作为参数传递到Thread类的构造器中，创建Thread对象，并调用start()</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(futureTask);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//6.获取Callable中call方法的返回值</span></span><br><span class="line">            <span class="comment">//get()返回值即为FutreTask构造器参数Callable实现类重写的call()的返回值</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">sum</span> <span class="operator">=</span> futureTask.get();<span class="comment">//(自带一个阻塞）</span></span><br><span class="line">            System.out.println(<span class="string">&quot;总和为&quot;</span> + sum);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="与Runnable方式的对比"><a href="#与Runnable方式的对比" class="headerlink" title="与Runnable方式的对比"></a>与Runnable方式的对比</h2><ul>
<li>call()可以有返回值，更灵活</li>
<li>call（）可以使用throws方式处理异常，更灵活</li>
<li>Callable使用了泛型参数。可以指明具体的call()的返回值类型，更灵活</li>
</ul>
<p>缺点：</p>
<p>如果在主线程中需要获取分线程call()的返回值，则此时的主线程是阻塞状态的</p>
<h1 id="线程创建方式四-使用线程池"><a href="#线程创建方式四-使用线程池" class="headerlink" title="线程创建方式四-使用线程池"></a>线程创建方式四-使用线程池</h1><p>此方式的好处：</p>
<ul>
<li>提高了程序执行的效率（因为线程已经提前创建好了）</li>
<li>提高了资源的复用率（因为执行完的线程并未销毁，而是可以继续执行其他的任务）</li>
<li>可以设置相关的参数，对线程池的线程的使用进行管理</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.提供指定线程数量的线程池</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">service1</span> <span class="operator">=</span> (ThreadPoolExecutor) service;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置线程池的属性</span></span><br><span class="line">        service1.setMaximumPoolSize(<span class="number">50</span>);<span class="comment">//设置线程池中线程数的上限</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.执行指定的线程的操作-需要提供实现Runnable接口或Callable接口1实现类的对象</span></span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">NumberThread</span>());</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">NumberThread1</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.关闭连接池</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumberThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span> ==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumberThread1</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="1-线程和进程相关定义"><a href="#1-线程和进程相关定义" class="headerlink" title="1.线程和进程相关定义"></a>1.线程和进程相关定义</h2><h2 id="2-多线程使用场景"><a href="#2-多线程使用场景" class="headerlink" title="2.多线程使用场景"></a>2.多线程使用场景</h2><ul>
<li>手机app应用图片的下载</li>
<li>迅雷的下载</li>
<li>Tomcat服务器上web应用，多个客户端发起请求，Tomcat针对多个请求开辟多个线程</li>
</ul>
<h2 id="3-如何实现多线程"><a href="#3-如何实现多线程" class="headerlink" title="3.如何实现多线程"></a>3.如何实现多线程</h2><h2 id="4-Thread类中的Start-和run-的区别？"><a href="#4-Thread类中的Start-和run-的区别？" class="headerlink" title="4.Thread类中的Start()和run()的区别？"></a>4.Thread类中的Start()和run()的区别？</h2><p>start():1.开启线程 2.调用线程的run()</p>
<h2 id="5-sleep-和yield-区别？"><a href="#5-sleep-和yield-区别？" class="headerlink" title="5.sleep()和yield()区别？"></a>5.sleep()和yield()区别？</h2><p>sleep():一旦调用，就进入阻塞状态（或TiMED_WAITING状态）</p>
<p>yield():释放cpu的执行权，处在runnable的状态</p>
<h2 id="6-线程生命周期"><a href="#6-线程生命周期" class="headerlink" title="6.线程生命周期"></a>6.线程生命周期</h2><p>ex:线程有哪些状态，如何让线程进入阻塞</p>
<p>ex线程有几个状态，就绪和阻塞有什么不同</p>
<h2 id="7-线程优先级怎么定义"><a href="#7-线程优先级怎么定义" class="headerlink" title="7.线程优先级怎么定义"></a>7.线程优先级怎么定义</h2><h2 id="8-stop-和suspend-方法为何不推荐使用"><a href="#8-stop-和suspend-方法为何不推荐使用" class="headerlink" title="8.stop()和suspend()方法为何不推荐使用"></a>8.stop()和suspend()方法为何不推荐使用</h2><p>stop():一旦执行，线程就结束了。导致run()有未执行结束的代码。stop()会导致释放同步监视器，导致线程安全</p>
<p>suspend():与resume()搭配使用，导致死锁</p>
<h2 id="9-线程安全的理解，线程安全如何造成的"><a href="#9-线程安全的理解，线程安全如何造成的" class="headerlink" title="9.线程安全的理解，线程安全如何造成的"></a>9.线程安全的理解，线程安全如何造成的</h2><h2 id="10-多线程公用一个数据变量需要注意什么"><a href="#10-多线程公用一个数据变量需要注意什么" class="headerlink" title="10.多线程公用一个数据变量需要注意什么"></a>10.多线程公用一个数据变量需要注意什么</h2><h2 id="11-多线程保证线程安全一般有几种方式"><a href="#11-多线程保证线程安全一般有几种方式" class="headerlink" title="11.多线程保证线程安全一般有几种方式"></a>11.多线程保证线程安全一般有几种方式</h2><p>同步机制</p>
<p>Lock接口</p>
<h2 id="12-用什么关键字修饰同步方法？"><a href="#12-用什么关键字修饰同步方法？" class="headerlink" title="12.用什么关键字修饰同步方法？"></a>12.用什么关键字修饰同步方法？</h2><h2 id="13-synchronized加在静态方法和普通方法的区别"><a href="#13-synchronized加在静态方法和普通方法的区别" class="headerlink" title="13.synchronized加在静态方法和普通方法的区别"></a>13.synchronized加在静态方法和普通方法的区别</h2><p>同步监视器不同。静态：类本身 非静态:this</p>
<h2 id="14-当一个线程进入一个对象的一个synchronized方法后，其他线程是否可以进入此对象的其他方法？"><a href="#14-当一个线程进入一个对象的一个synchronized方法后，其他线程是否可以进入此对象的其他方法？" class="headerlink" title="14.当一个线程进入一个对象的一个synchronized方法后，其他线程是否可以进入此对象的其他方法？"></a>14.当一个线程进入一个对象的一个synchronized方法后，其他线程是否可以进入此对象的其他方法？</h2><p>需要看其他方法是否使用synchronized修饰，同步监视器的this是否是同一个。</p>
<p>只有当使用了synchronized且this是同一个的情况下，就不能访问</p>
<h2 id="15-线程同步与阻塞的关系？同步一定阻塞吗？阻塞一定同步吗？"><a href="#15-线程同步与阻塞的关系？同步一定阻塞吗？阻塞一定同步吗？" class="headerlink" title="15.线程同步与阻塞的关系？同步一定阻塞吗？阻塞一定同步吗？"></a>15.线程同步与阻塞的关系？同步一定阻塞吗？阻塞一定同步吗？</h2><p>同步一定阻塞。 阻塞不一定同步</p>
<h2 id="16-wait和notify方法为什么一定要在同步块中调用？"><a href="#16-wait和notify方法为什么一定要在同步块中调用？" class="headerlink" title="16.wait和notify方法为什么一定要在同步块中调用？"></a>16.wait和notify方法为什么一定要在同步块中调用？</h2><p>调用者必须是同步监视器。</p>
<h2 id="17-生产者、消费者问题"><a href="#17-生产者、消费者问题" class="headerlink" title="17.生产者、消费者问题"></a>17.生产者、消费者问题</h2><h2 id="18-wait和sleep的区别"><a href="#18-wait和sleep的区别" class="headerlink" title="18.wait和sleep的区别"></a>18.wait和sleep的区别</h2><h2 id="19-手写单例模式。"><a href="#19-手写单例模式。" class="headerlink" title="19.手写单例模式。"></a>19.手写单例模式。</h2>
      
    </div>

    
    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Alugg"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Alugg</p>
  <div class="site-description" itemprop="description">Step out of your comfort zone</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:lu.tian2022@gmail.com" title="E-Mail → mailto:lu.tian2022@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023-09 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alugg</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">111k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:40</span>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
